{
    "name": "Info du jour",
    "isActive": "1",
    "group": "",
    "mode": "schedule",
    "schedule": "*\/5 * * * *",
    "trigger": [
        ""
    ],
    "timeout": "0",
    "object_id": null,
    "isVisible": "0",
    "display": {
        "name": "",
        "icon": "<i class=\"icon divers-today1 icon_blue\"><\/i>",
        "width": "432px",
        "height": "92px"
    },
    "order": "9999",
    "description": "Auteur : @Phpvarious\nGithub --> https:\/\/github.com\/Phpvarious\/Widgets_perso\/tree\/master\/Info_du_jour\nInfos vacances Max --> 2023\/07\/08 au 2023\/09\/01, après faudra mettre à jour le scenario.\n",
    "configuration": {
        "timeDependency": 0,
        "has_return": 0,
        "logmode": "default",
        "allowMultiInstance": "0",
        "syncmode": "0",
        "timeline::enable": "0",
        "timeline::folder": ""
    },
    "elements": [
        {
            "name": "",
            "type": "comment",
            "options": [],
            "order": "0",
            "subElements": [
                {
                    "name": "",
                    "type": "comment",
                    "subtype": "comment",
                    "options": {
                        "collapse": "0"
                    },
                    "order": "0",
                    "expressions": [
                        {
                            "type": "comment",
                            "subtype": "",
                            "expression": "Auteur : @Phpvarious\nDate de création: 05\/12\/2021\nChange Log :\n20\/01\/2022 : Création.\n23\/01\/2022 : Remplacement de la fonction sun_pos() qui génerait des erreurs dans le log \"scenario_execution\"\npar getSunPosition() qui est de plus, plus précise.\n21\/02\/2022 : Bugfix sur la date du dernier jour de vacances.\nRajout des dates de vacances jusqu'au 2023\/09\/01",
                            "options": [],
                            "order": "0"
                        }
                    ]
                }
            ]
        },
        {
            "name": "",
            "type": "action",
            "options": [],
            "order": "0",
            "subElements": [
                {
                    "name": "",
                    "type": "action",
                    "subtype": "action",
                    "options": {
                        "collapse": "0",
                        "enable": "1"
                    },
                    "order": "0",
                    "expressions": [
                        {
                            "type": "element",
                            "subtype": "",
                            "expression": "511",
                            "options": [],
                            "order": "0",
                            "element": {
                                "name": "",
                                "type": "code",
                                "options": [],
                                "order": "0",
                                "subElements": [
                                    {
                                        "name": "",
                                        "type": "code",
                                        "subtype": "action",
                                        "options": {
                                            "collapse": "1",
                                            "enable": "1"
                                        },
                                        "order": "0",
                                        "expressions": [
                                            {
                                                "type": "code",
                                                "subtype": "",
                                                "expression": "$zone = 'B'; \/\/ A,B ou C pour Vacances\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n$tags = $scenario->getTags(); \/\/récupère la liste des tags\n$lat = config::byKey('info::latitude');\n$long = config::byKey('info::longitude');\n$scenario->setLog('┌─────────────────── DEBUT BLOC CODE');\n$scenario->setLog('|┌─────────────────── SOLEIL');\n\n\/\/ Date du jour\n$dateDuJour = date(\"d\/m\/Y\");\n\n\/\/ Numero de jour de l'année\n$daynumber = date('z')+1;\n\n\/\/ Lever & Coucher du soleil\n$sun_info = date_sun_info(time(), $lat, $long);\n$sunrise = date(\"H:i\", $sun_info[\"sunrise\"]);\n$zenith = date(\"H:i\", $sun_info[\"transit\"]);\n$sunset = date(\"H:i\", $sun_info[\"sunset\"]);\n$sunriseScenario = date(\"Hi\", $sun_info[\"sunrise\"]);\n$zenithScenario = date(\"Hi\", $sun_info[\"transit\"]);\n$sunsetScenario = date(\"Hi\", $sun_info[\"sunset\"]);\n\n$sunrise_minutes = (date(\"H\", $sun_info[\"sunrise\"])*60)+date(\"i\", $sun_info[\"sunrise\"]);\n$sunset_minutes = (date(\"H\", $sun_info[\"sunset\"])*60)+date(\"i\", $sun_info[\"sunset\"]);\n$now_minutes = (date(\"H\")*60)+date(\"i\");\n\n$diff1 =  $sunset_minutes - $sunrise_minutes; \/\/mn entre leve et coucher\n$diff2 = $now_minutes - $sunrise_minutes;\nif ($diff2 < 0 || $diff2 > $sunset_minutes) $diff2 = 0;\n$poucent_sun = ($diff2*100)\/$diff1;\n$positionHorizontalSun = ($poucent_sun\/100*225)+5; \/\/ longueur div = 225, padding = 5\n$positionHorizontalSun = ($positionHorizontalSun > 230) ? 230 : $positionHorizontalSun;\n\n\/\/ Durée du jour\n$sunriseSecond = strtotime(date(\"Y-m-d H:i:s\", $sun_info[\"sunrise\"]));\n$sunsetSecond = strtotime(date(\"Y-m-d H:i:s\", $sun_info[\"sunset\"]));\n$interval = $sunsetSecond - $sunriseSecond;\n$seconds = $interval % 60;\n$minutes = floor(($interval % 3600) \/ 60);\n$hours = floor($interval \/ 3600);\nif ($minutes < 10) $dureeJour = $hours.\":0\".$minutes;\nelse $dureeJour = $hours.\":\".$minutes;\n\n\/\/ Ecart depuis hier\n$sun_info_hier = date_sun_info(strtotime('-1 day'), $lat, $long);\n$sunriseSecond_hier = strtotime(date(\"Y-m-d H:i:s\", $sun_info_hier[\"sunrise\"]));\n$sunsetSecond_hier = strtotime(date(\"Y-m-d H:i:s\", $sun_info_hier[\"sunset\"]));\n$interval_hier = $sunsetSecond_hier - $sunriseSecond_hier;\n$ecart = $interval - $interval_hier;\n$ecartSeconds = $ecart % 60;\n$ecartMinutes = floor(($ecart % 3600) \/ 60);\nif ($ecart > 0) $ecart = \"+ \".$ecartMinutes.\"min \".$ecartSeconds.\"s\"; \/\/ Ecart\nelse $ecart = \"- \".abs($ecartMinutes).\"min \".abs($ecartSeconds).\"s\";\n\n\/\/ Mode Jour\/nuit\nif(date(\"H:i\") >= $sunrise && date(\"H:i\") < $sunset){\n  $modeJour = \"Jour\"; \/\/ Jour ou Nuit\n  $modeJourBinaire = 1; \/\/ Jour Binaire \n}\nelse {\n  $modeJour = \"Nuit\";\n  $modeJourBinaire = 0; \/\/ Nuit Binaire \n}\n\/\/$modeJour = \"Jour\";\n\/\/$modeJourBinaire = 0;\n\/\/ Week-end\nif(date(\"l\") == 'Saturday' || date(\"l\") == 'Sunday') $weekend = 1; \/\/ Week-end\nelse $weekend = 0;\n\n\/\/ Jours fériés\n$date = date(\"Y-m-d\");\n\/\/$date = date(\"Y-12-25\");\n$ferie = 0;\n$libelle_ferie =\"\";\n$dateProchainFerie=\"\";\n$libelleProchainFerie=\"\";\n$diffFerie = \"\";\n$dimanche_paques = date(\"Y-m-d\", easter_date(date(\"Y\")));\/\/\n$holidays[\"Jour de l'an\"] = date(\"Y\").\"-01-01\";\n$holidays[\"Lundi de Paques\"] = date(\"Y-m-d\", strtotime(\"$dimanche_paques +1 day\"));\n$holidays[\"Ascension\"] = date(\"Y-m-d\", strtotime(\"$dimanche_paques +39 day\"));\n$holidays[\"Lundi Pentecote\"] = date(\"Y-m-d\", strtotime(\"$dimanche_paques +50 day\"));\n$holidays[\"Fête du travail\"] = date(\"Y\").\"-05-01\";\n$holidays[\"Victoire des alliés 1945\"] = date(\"Y\").\"-05-08\";\n$holidays[\"Assomption\"] = date(\"Y\").\"-08-15\";\n$holidays[\"Fête nationale\"] = date(\"Y\").\"-07-14\";\n$holidays[\"Armistice 1918\"] = date(\"Y\").\"-11-11\";\n$holidays[\"Toussaint\"] = date(\"Y\").\"-11-01\";\n$holidays[\"Noël\"] = date(\"Y\").\"-12-25\";\n$count = count($holidays);\nasort($holidays);\n$i=1;\n\nforeach($holidays as $key => $holiday_timestamp) {\n  if ($holiday_timestamp == $date) {\n    $ferie = 1; $libelle_ferie = $key;\n  }\n  if ($i == $count) { \/\/ si dernier ferié\n    if ($date < $holiday_timestamp)\n    {\n      $dateProchainFerie = $holiday_timestamp;\n      $libelleProchainFerie = $key;\n      break;\n    }\n    else\n    {\n      $d= date(\"Y\")+1;\n      $dateProchainFerie = $d.'-01-01';\n      $libelleProchainFerie = \"Jour de l'an\";\n      break;\n    }   \n  }\n  else\n  {\n    if ($date < $holiday_timestamp)\n    {\n      $dateProchainFerie = $holiday_timestamp;\n      $libelleProchainFerie = $key;\n      break; \n    }   \n  }\n  $i++;\n}\n$date1 = new DateTime($dateProchainFerie);\n$date2 = new DateTime($date);\n$diffFerie = $date1->diff($date2)->format(\"%a\");\n$dateProchainFerie = date(\"d\/m\/Y\",strtotime(str_replace('\/','-',$dateProchainFerie)));\n\n\/\/ Saisons\n$date = date(\"Y-m-d\"); \n\/\/$date = \"2021-01-10\";\n$date_year = date(\"Y\", strtotime($date));  \nif (strtotime($date)<strtotime($date_year.'-03-21') || strtotime($date)>=strtotime($date_year.'-12-21')) $saison = \"Hiver\";\nelseif (strtotime($date)>=strtotime($date_year.'-09-23')) $saison = \"Automne\";\nelseif (strtotime($date)>=strtotime($date_year.'-06-21')) $saison = \"Eté\";\nelseif (strtotime($date)>=strtotime($date_year.'-03-21')) $saison = \"Printemps\";\n\/\/$saison = \"Hiver\";\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\nfunction getSunPosition($UnixTimestamp, $lat, $long)\n{\n  \/\/ fonction récuperé sur https:\/\/github.com\/KiboOst\/php-sunPos\/blob\/master\/phpSunPos.php et modifier pour ce scénario\n  $year = date(\"Y\",$UnixTimestamp);\n  $month = date(\"n\",$UnixTimestamp);\n  $day = date(\"j\",$UnixTimestamp);\n  $hour = gmdate(\"H\",$UnixTimestamp);\n  $min = gmdate(\"i\",$UnixTimestamp);\n        \/\/ From: http:\/\/stackoverflow.com\/questions\/8708048\/position-of-the-sun-given-time-of-day-latitude-and-longitude?rq=1\n\t\t\/\/ online check: https:\/\/www.esrl.noaa.gov\/gmd\/grad\/solcalc\/\n\n\t\t\/\/ Get Julian date for date at noon\n\t\t$jd = gregoriantojd($month,$day,$year);\n\n\t\t\/\/correct for half-day offset\n\t\t$dayfrac = $hour \/ 24 - .5;\n\n\t\t\/\/now set the fraction of a day\n\t\t$frac = $dayfrac + $min \/ 60 \/ 24;\n\t\t$jd = $jd + $frac;\n\n\t\t\/\/ The input to the Atronomer's almanach is the difference between\n\t\t\/\/ the Julian date and JD 2451545.0 (noon, 1 January 2000)\n\t\t$time = ($jd - 2451545);\n\n\t\t\/\/ Ecliptic coordinates\n\n\t\t\/\/ Mean longitude\n\t\t$mnlong = (280.460 + 0.9856474 * $time);\n\t\t$mnlong = fmod($mnlong,360);\n\t\tif ($mnlong < 0) $mnlong = ($mnlong + 360);\n\n\t\t\/\/ Mean anomaly\n\t\t$mnanom = (357.528 + 0.9856003 * $time);\n\t\t$mnanom = fmod($mnanom,360);\n\t\tif ($mnanom < 0) $mnanom = ($mnanom + 360);\n\t\t$mnanom = deg2rad($mnanom);\n\n\t\t\/\/ Ecliptic longitude and obliquity of ecliptic\n\t\t$eclong = ($mnlong + 1.915 * sin($mnanom) + 0.020 * sin(2 * $mnanom));\n\t\t$eclong = fmod($eclong,360);\n\t\tif ($eclong < 0) $eclong = ($eclong + 360);\n\t\t$oblqec = (23.439 - 0.0000004 * $time);\n\t\t$eclong = deg2rad($eclong);\n\t\t$oblqec = deg2rad($oblqec);\n\n\t\t\/\/ Celestial coordinates\n\t\t\/\/ Right ascension and declination\n\t\t$num = (cos($oblqec) * sin($eclong));\n\t\t$den = (cos($eclong));\n\t\t$ra = (atan($num \/ $den));\n\t\tif ($den < 0) $ra = ($ra + pi());\n\t\tif ($den >= 0 && $num <0) $ra = ($ra + 2*pi());\n\t\t$dec = (asin(sin($oblqec) * sin($eclong)));\n\n\t\t\/\/ Local coordinates\n\t\t\/\/ Greenwich mean sidereal time\n\t\t\/\/$h = $hour + $min \/ 60 + $sec \/ 3600;\n\t\t$h = $hour + $min \/ 60;\n\t\t$gmst = (6.697375 + .0657098242 * $time + $h);\n\t\t$gmst = fmod($gmst,24);\n\t\tif ($gmst < 0) $gmst = ($gmst + 24);\n\n\t\t\/\/ Local mean sidereal time\n\t\t$lmst = ($gmst + $long \/ 15);\n\t\t$lmst = fmod($lmst,24);\n\t\tif ($lmst < 0) $lmst = ($lmst + 24);\n\t\t$lmst = deg2rad($lmst * 15);\n\n\t\t\/\/ Hour angle\n\t\t$ha = ($lmst - $ra);\n\t\tif ($ha < pi()) $ha = ($ha + 2*pi());\n\t\tif ($ha > pi()) $ha = ($ha - 2*pi());\n\n\t\t\/\/ Latitude to radians\n\t\t$lat = deg2rad($lat);\n\n\t\t\/\/ Azimuth and elevation\n\t\t$el = (asin(sin($dec) * sin($lat) + cos($dec) * cos($lat) * cos($ha)));\n\t\t$az = (asin(-cos($dec) * sin($ha) \/ cos($el)));\n\n\t\t\/\/ For logic and names, see Spencer, J.W. 1989. Solar Energy. 42(4):353\n\t\tif ((sin($dec) - sin($el) * sin($lat)) >00) {\n\t\tif(sin($az) < 0) $az = ($az + 2*pi());\n\t\t} else {\n\t\t$az = (pi() - $az);\n\t\t}\n\n\t\t$el = rad2deg($el);\n\t\t$az = rad2deg($az);\n\t\t$lat = rad2deg($lat);\n\n\t\treturn array(number_format($el, 2), number_format($az, 2));\n\t}\n$Sun = getSunPosition(time(),$lat,$long);\n$Sun2 = getSunPosition(strtotime( date(\"Y\").\"-\".date(\"m\").\"-\".date(\"d\").\"T\".$zenith.\":00\" ),$lat,$long);\n\n$positionVerticalSun = ($Sun[0]*55\/$Sun2[0])-15;\n$positionVerticalSun = ($positionVerticalSun < -15) ? -15 : $positionVerticalSun;\n\n$scenario->setLog('|| Date du jour : '.$dateDuJour);\n$scenario->setLog('|| Numero du jour : '.$daynumber);\n$scenario->setLog('|| Lever : '.$sunrise);\n$scenario->setLog('|| zenith : '.$zenith);\n$scenario->setLog('|| Coucher : '.$sunset);\n$scenario->setLog('|| Position H widget : '.$positionHorizontalSun.'px');\n$scenario->setLog('|| Position V widget : '.$positionVerticalSun.'px');\n$scenario->setLog('|| Elevation du soleil : '.$Sun[0]);\n$scenario->setLog('|| Elevation du soleil Zenith : '.$Sun2[0]);\n$scenario->setLog('|| Durée du jour : '.$dureeJour);\n$scenario->setLog('|| Différence du jour : '.$ecart);\n$scenario->setLog('|| Mode Jour\/nuit : '.$modeJour);\n$scenario->setLog('|| Mode Jour\/nuit Bianire : '.$modeJourBinaire);\n$scenario->setLog('|| Week-end : '.$weekend);\n$scenario->setLog('|| Férie : '.$ferie);\n$scenario->setLog('|| Libellé Férie : '.$libelle_ferie);\n$scenario->setLog('|| Date Prochain Férie : '.$dateProchainFerie);\n$scenario->setLog('|| Libellé Prochain Férie : '.$libelleProchainFerie);\n$scenario->setLog('|| Nombes jours Prochain Férie : '.$diffFerie);\n$scenario->setLog('|| Saison : '.$saison);\n$scenario->setLog('|└───────────────────────────');\n\n\/\/envoi des infos\n$tags['#elevation#'] = $Sun[0];\n$tags['#elevationZenith#'] = $Sun2[0];\n$tags['#leverSoleil#'] = $sunrise;\n$tags['#zenithSoleil#'] = $zenith;\n$tags['#coucherSoleil#'] = $sunset;\n$tags['#leverSoleilScenario#'] = $sunriseScenario;\n$tags['#zenithSoleilScenario#'] = $zenithScenario;\n$tags['#coucherSoleilScenario#'] = $sunsetScenario;\n$tags['#positionHorizontalSun#'] = $positionHorizontalSun;\n$tags['#positionVerticalSun#'] = $positionVerticalSun;\n$tags['#dureeJour#'] = $dureeJour;\n$tags['#dureeJourEcart#'] = $ecart;\n$tags['#dateDuJour#'] = $dateDuJour;\n$tags['#daynumber#'] = $daynumber;\n$tags['#modeJour#'] = $modeJour;\n$tags['#modeJourBinaire#'] = $modeJourBinaire;\n$tags['#weekend#'] = $weekend;\n$tags['#ferie#'] = $ferie;\n$tags['#libelleFerie#'] = $libelle_ferie;\n$tags['#dateProchainFerie#'] = $dateProchainFerie;\n$tags['#libelleProchainFerie#'] = $libelleProchainFerie;\n$tags['#nbProchainFerie#'] = $diffFerie;\n$tags['#saison#'] = $saison;\n\n$scenario->setLog('|┌─────────────────── VACANCES');\n\/\/$url = \"http:\/\/telechargement.index-education.com\/vacances.xml\"; \/\/ pour Vacances\n$today = date(\"Y\/m\/d\");\n\/\/$today = \"2022\/02\/21\";\n\n$queryLibelleVacances = array(\"Vacances de la Toussaint\",\"Vacances de Noël\",\"Vacances d'hiver\",\"Vacances de printemps\",\"Vacances d'été\",\"Pont de l'Ascension\");\n$queryIdVacances = array(1,2,3,4,5,12);\n\nswitch($zone)\n{\n  case 'A': \n    $queryDebutVacances = array(\"2022\/02\/12\",\"2022\/04\/16\",\"2022\/05\/26\",\"2022\/07\/07\",\"2022\/10\/22\",\"2022\/12\/17\",\"2023\/02\/04\",\"2023\/04\/08\",\"2023\/05\/18\",\"2023\/07\/08\");\n    $queryFinVacances = array(\"2022\/02\/28\",\"2022\/05\/02\",\"2022\/05\/30\",\"2022\/09\/01\",\"2022\/11\/07\",\"2023\/01\/03\",\"2023\/02\/20\",\"2023\/04\/24\",\"2023\/05\/22\",\"2023\/09\/01\");\n    $queryNumVacances = array(3,4,12,5,1,2,3,4,12,5);    \n    break;\n  case 'B': \n    $queryDebutVacances = array(\"2022\/02\/05\",\"2022\/04\/09\",\"2022\/05\/26\",\"2022\/07\/07\",\"2022\/10\/22\",\"2022\/12\/17\",\"2023\/02\/11\",\"2023\/04\/15\",\"2023\/05\/18\",\"2023\/07\/08\");\n    $queryFinVacances = array(\"2022\/02\/21\",\"2022\/04\/25\",\"2022\/05\/30\",\"2022\/09\/01\",\"2022\/11\/07\",\"2023\/01\/03\",\"2023\/02\/27\",\"2023\/05\/02\",\"2023\/05\/22\",\"2023\/09\/01\");\n    $queryNumVacances = array(3,4,12,5,1,2,3,4,12,5);  \n    break;    \n  case 'C': \n    $queryDebutVacances = array(\"2022\/02\/19\",\"2022\/04\/23\",\"2022\/05\/26\",\"2022\/07\/07\",\"2022\/10\/22\",\"2022\/12\/17\",\"2023\/02\/18\",\"2023\/04\/22\",\"2023\/05\/18\",\"2023\/07\/08\");\n    $queryFinVacances = array(\"2022\/03\/07\",\"2022\/05\/09\",\"2022\/05\/30\",\"2022\/09\/01\",\"2022\/11\/07\",\"2023\/01\/03\",\"2023\/03\/06\",\"2023\/05\/09\",\"2023\/05\/22\",\"2023\/09\/01\");\n    $queryNumVacances = array(3,4,12,5,1,2,3,4,12,5); \n    break;\n  default:\n    $queryDebutVacances = array(\"2022\/02\/05\",\"2022\/04\/09\",\"2022\/05\/26\",\"2022\/07\/07\",\"2022\/10\/22\",\"2022\/12\/17\",\"2023\/02\/11\",\"2023\/04\/15\",\"2023\/05\/18\",\"2023\/07\/08\");\n    $queryFinVacances = array(\"2022\/02\/21\",\"2022\/04\/25\",\"2022\/05\/30\",\"2022\/09\/01\",\"2022\/11\/07\",\"2023\/01\/03\",\"2023\/02\/27\",\"2023\/05\/02\",\"2023\/05\/22\",\"2023\/09\/01\");\n    $queryNumVacances = array(3,4,12,5,1,2,3,4,12,5);     \n}\n\n$debutVacances = \"\";\n$finVacances = \"\";\n$enVacances = 0;\n$vacancesEcLibelle = \"\";\n$prochainDebutVacance = \"\";\n$prochainFinVacance = \"\";\n$prochainLibelleVacances = \"\";\n$diffVacances = \"\";\n$erreur = false;\n$findonnee = false;\n\n$nbMax = count($queryDebutVacances);\nif ($nbMax != count($queryFinVacances) || $nbMax != count($queryNumVacances)) $erreur = true;\n$i=0;\nif (!$erreur)\n{    \n  foreach ($queryFinVacances as $vacance) {\n    \/\/if ($today <= $vacance) {\n      if ($today < $vacance) {\n      $key = array_search($queryNumVacances[$i],$queryIdVacances);\n      $libelleVacances = $queryLibelleVacances[$key];\n      if ($queryDebutVacances[$i] <= $today) {\n        $debutVacances = $queryDebutVacances[$i];\n        $finVacances = $vacance;\n        $enVacances = 1;\n        $vacancesEcLibelle = $queryLibelleVacances[$key];\n        $i++;\n        if ($i < $nbMax)\n        {\n          $prochainDebutVacance = $queryDebutVacances[$i];\n          $prochainFinVacance = $queryFinVacances[$i];\n          $key = array_search($queryNumVacances[$i],$queryIdVacances);\n          $prochainLibelleVacance = $queryLibelleVacances[$key];\n        }\n        else $findonnee = true;\n      } \n      else \n      {        \n        $prochainDebutVacance = $queryDebutVacances[$i];\n        $prochainFinVacance = $vacance;\n        $prochainLibelleVacance = $libelleVacances;\n      }\n      break;      \n    }\n    else if ($i == ($nbMax-1)) $findonnee = true;\n    $i++;\n  } \n  if (!$findonnee){\n    $diffDebutVacance = new DateTime($prochainDebutVacance);\n    $diffToday = new DateTime($today);\n    $diffVacances = $diffDebutVacance->diff($diffToday)->format(\"%a\");\n\n    $debutVacances = ($debutVacances != \"\") ? date(\"d\/m\/Y\",strtotime($debutVacances)):\"\";\n    $finVacances = ($finVacances != \"\") ? date(\"d\/m\/Y\",strtotime($finVacances)):\"\";\n    $prochainDebutVacance = ($prochainDebutVacance != \"\") ? date(\"d\/m\/Y\",strtotime($prochainDebutVacance)):\"\";\n    $prochainFinVacance = ($prochainFinVacance != \"\") ? date(\"d\/m\/Y\",strtotime($prochainFinVacance)):\"\";\n    \n    $scenario->setLog('||------------------ EN COURS -----------------');\n    $scenario->setLog('||debutVacances : '.$debutVacances);\n    $scenario->setLog('||finVacances : '.$finVacances);\n    $scenario->setLog('||En vacances : '.$enVacances);\n    $scenario->setLog('||Libelle : '.$vacancesEcLibelle);\n    $scenario->setLog('||------------------ PROCHAIN -----------------');\n    $scenario->setLog('||debutVacances : '.$prochainDebutVacance);\n    $scenario->setLog('||finVacances : '.$prochainFinVacance);\n    $scenario->setLog('||Libelle : '.$prochainLibelleVacance);\n    $scenario->setLog('||Nombes jours Prochaine vacances : '.$diffVacances);\n  }\n  else $scenario->setLog('|| [ERROR] Veuillez mettre a jour les données pour les vacances !!!');\n}\nelse $scenario->setLog('|| [ERROR] Une erreur a été detectée dans les données de configuration des vacances !!!');\n\n$tags['#vacancesEnCours#'] = $enVacances;\n$tags['#vacancesEnCoursLibelle#'] = $vacancesEcLibelle;\n$tags['#debutVacancesEnCours#'] = $debutVacances;\n$tags['#finVacancesEnCours#'] = $finVacances;\n$tags['#vacancesPochainesLibelle#'] = $prochainLibelleVacance;\n$tags['#debutVacancesProchaines#'] = $prochainDebutVacance;\n$tags['#finVacancesProchaines#'] = $prochainFinVacance;\n$tags['#nbProchainesVacances#'] = $diffVacances;\n$scenario->setLog('|└───────────────────────────');\n\n$scenario->setLog('|┌─────────────────── SAINT DU JOUR');\nfunction saint($jour,$mois){\n  switch($mois)\n  {\n    case 1:\n      switch($jour)\n      {\n        case 1: $saint = \"Jour de l'an\";\n        break;\n        case 2: $saint = \"St Basile\";\n            break;\n        case 3: $saint = \"Ste Geneviève\";\n            break;\n        case 4: $saint = \"St Odilon\";\n            break;\n        case 5: $saint = \"St Edouard\";\n            break;\n        case 6: $saint = \"Ste Mélanie\";\n            break;\n        case 7: $saint = \"St Raymond\";\n            break;\n        case 8: $saint = \"St Lucien\";\n            break;\n        case 9: $saint = \"Ste Alix\";\n            break;\n        case 10: $saint = \"St Guillaume\";\n            break;\n        case 11: $saint = \"St Paulin\";\n            break;\n        case 12: $saint = \"Ste Tatiana\";\n            break;\n        case 13: $saint  = \"Ste Yvette\";\n            break;\n        case 14: $saint  = \"Ste Nina\";\n            break;\n        case 15: $saint  = \"St Remi\";\n            break;\n        case 16: $saint  = \"St Marcel\";\n            break;\n        case 17: $saint  = \"Ste Roseline\";\n            break;\n        case 18: $saint  = \"Ste Prisca\";\n            break;\n        case 19: $saint  = \"St Marius\";\n            break;\n        case 20: $saint  = \"St Sébastien\";\n            break;\n        case 21: $saint  = \"Ste Agnès\";\n            break;\n        case 22: $saint = \"St Vincent\";\n            break;\n        case 23: $saint = \"St Barnard\";\n            break;\n        case 24: $saint = \"St François\";\n            break;\n        case 25: $saint = \"Conv de St Paul\";\n            break;\n        case 26: $saint = \"St Timothée\";\n            break;\n        case 27: $saint = \"Ste Angèle\";\n            break;\n        case 28: $saint = \"St Thomas d'Aquin\";\n            break;\n        case 29: $saint = \"St Gildas\";\n            break;\n        case 30: $saint = \"Ste Martine\";\n            break;\n        case 31: $saint = \"Ste Marcelle\";\n        break;\n      }\n      break;\n    case 2:\n      switch($jour)\n      {\n        case 1: $saint = \"Ste Ella\";\n          break;\n        case 2: $saint = \"Présentation\";\n          break;\n        case 3: $saint = \"St Blaise\";\n          break;\n        case 4: $saint = \"Ste Véronique\";\n          break;\n        case 5: $saint = \"Ste Agathe\";\n          break;\n        case 6: $saint = \"St Gaston\";\n          break;\n        case 7: $saint = \"Ste Eugénie\";\n          break;\n        case 8: $saint = \"Ste Jacqueline\";\n          break;\n        case 9: $saint = \"Ste Apolline\";\n          break;\n        case 10: $saint = \"St Arnaud\";\n          break;\n        case 11: $saint = \"N-D de Lourdes\";\n          break;\n        case 12: $saint = \"St Félix\";\n          break;\n        case 13: $saint = \"Ste Béatrice\";\n          break;\n        case 14: $saint = \"St Valentin\";\n          break;\n        case 15: $saint = \"St Claude\";\n          break;\n        case 16: $saint = \"Ste Julienne\";\n          break;\n        case 17: $saint = \"St Alexis\";\n          break;\n        case 18: $saint = \"Ste Bernadette\";\n          break;\n        case 19: $saint = \"St Gabin\";\n          break;\n        case 20: $saint = \"Ste Aimée\";\n          break;\n        case 21: $saint = \"St Damien\";\n          break;\n        case 22: $saint = \"Ste Isabelle\";\n          break;\n        case 23: $saint = \"St Lazare\";\n          break;\n        case 24: $saint = \"St Modeste\";\n          break;\n        case 25: $saint = \"St Roméo\";\n          break;\n        case 26: $saint = \"St Nestor\";\n          break;\n        case 27: $saint = \"Ste Honorine\";\n          break;\n        case 28: $saint = \"St Romain\";\n          break;\n        case 29: $saint = \"St Auguste\";\n          break;\n      }\n    break;\n    case 3:\n      switch($jour)\n      {\n        case 1: $saint  = \"St Aubin\";\n    break;\n        case 2: $saint  = \"St Charles\";\n    break;\n        case 3: $saint  = \"St Guénolé\";\n    break;\n    case 4: $saint  = \"St Casimir\";\n    break;\n    case 5: $saint  = \"Ste Olive\";\n    break;\n    case 6: $saint  = \"Ste Colette\";\n    break;\n    case 7: $saint  = \"Ste Félicité\";\n    break;\n    case 8: $saint  = \"St Jean de Dieu\";\n    break;\n    case 9: $saint  = \"Ste Françoise\";\n    break;\n    case 10: $saint  = \"St Vivien\";\n    break;\n    case 11: $saint  = \"Ste Rosine\";\n    break;\n    case 12: $saint  = \"Ste Justine\";\n    break;\n    case 13: $saint  = \"St Rodrigue\";\n    break;\n    case 14: $saint  = \"Ste Mathilde\";\n    break;\n    case 15: $saint  = \"Ste Louise\";\n    break;\n    case 16: $saint  = \"Ste Bénédicte\";\n    break;\n    case 17: $saint  = \"St Patrice\";\n    break;\n    case 18: $saint  = \"St Cyrille\";\n    break;\n    case 19: $saint  = \"St Joseph\";\n    break;\n    case 20: $saint  = \"St Herbert\";\n    break;\n    case 21: $saint  = \"Ste Clémence\";\n    break;\n    case 22: $saint  = \"Ste Léa\";\n    break;\n    case 23: $saint  = \"St Victorien\";\n    break;\n    case 24: $saint  = \"Ste Catherine de Suède\";\n    break;\n    case 25: $saint  = \"Annonciation\";\n    break;\n    case 26: $saint  = \"Ste Larissa\";\n    break;\n    case 27: $saint  = \"St Habib\";\n    break;\n    case 28: $saint  = \"St Gontran\";\n    break;\n    case 29: $saint  = \"Ste Gwladys\";\n    break;\n    case 30: $saint  = \"St Amédée\";\n    break;\n    case 31: $saint  = \"St Benjamin\";\n    break;\n    }\n    break;\n    case 4:\n        switch($jour)\n        {\n        \n    case 1: $saint  = \"St Hughes\";\n    break;\n    case 2: $saint  = \"Ste Sandrine\";\n    break;\n    case 3: $saint  = \"St Richard\";\n    break;\n    case 4: $saint  = \"St Isidore\";\n    break;\n    case 5: $saint  = \"Ste Irène\";\n    break;\n    case 6: $saint  = \"St Marcellin\";\n    break;\n    case 7: $saint  = \"St J-B de la Salle\";\n    break;\n    case 8: $saint  = \"Ste Julie\";\n    break;\n    case 9: $saint  = \"St Gautier\";\n    break;\n    case 10: $saint  = \"St Fulbert\";\n    break;\n    case 11: $saint  = \"St Stanislas\";\n    break;\n    case 12: $saint  = \"Ste Jules\";\n    break;\n    case 13: $saint  = \"Ste Ida\";\n    break;\n    case 14: $saint  = \"St Maxime\";\n    break;\n    case 15: $saint  = \"St Paterne\";\n    break;\n    case 16: $saint  = \"St Benoit-Joseph\";\n    break;\n    case 17: $saint  = \"St Anicet\";\n    break;\n    case 18: $saint  = \"St Parfait\";\n    break;\n    case 19: $saint  = \"Ste Emma\";\n    break;\n    case 20: $saint  = \"Ste Odette\";\n    break;\n    case 21: $saint  = \"St Anselme\";\n    break;\n    case 22: $saint  = \"St Alexandre\";\n    break;\n    case 23: $saint  = \"St Georges\";\n    break;\n    case 24: $saint  = \"St Fidèle\";\n    break;\n    case 25: $saint  = \"St Marc\";\n    break;\n    case 26: $saint  = \"Ste Alida\";\n    break;\n    case 27: $saint  = \"Ste Zita\";\n    break;\n    case 28: $saint  = \"Ste Valérie\";\n    break;\n    case 29: $saint  = \"Ste Cath. de Sienne\";\n    break;\n    case 30: $saint  = \"St Robert\";\n    break;\n    }\n    break;\n    case 5:\n        switch($jour)\n        {\n        \n    case 1: $saint  = \"Fête du Travail\";\n    break;\n    case 2: $saint  = \"St Boris\";\n    break;\n    case 3: $saint  = \"SS Philippe Jacques\";\n    break;\n    case 4: $saint  = \"St Sylvain\";\n    break;\n    case 5: $saint  = \"Ste Judith\";\n    break;\n    case 6: $saint  = \"Ste Prudence\";\n    break;\n    case 7: $saint  = \"Ste Gisèle\";\n    break;\n    case 8: $saint  = \"Victoire 1945\";\n    break;\n    case 9: $saint  = \"Ste Pacôme\";\n    break;\n    case 10: $saint  = \"Ste Solange\";\n    break;\n    case 11: $saint  = \"Ste Estelle\";\n    break;\n    case 12: $saint  = \"St Achille\";\n    break;\n    case 13: $saint  = \"Ste Rolande\";\n    break;\n    case 14: $saint  = \"St Mathias\";\n    break;\n    case 15: $saint  = \"Ste Denise\";\n    break;\n    case 16: $saint  = \"St Honoré\";\n    break;\n    case 17: $saint  = \"St Pascal\";\n    break;\n    case 18: $saint  = \"St Eric\";\n    break;\n    case 19: $saint  = \"St Yves\";\n    break;\n    case 20: $saint  = \"St Bernardin\";\n    break;\n    case 21: $saint  = \"St Constantin\";\n    break;\n    case 22: $saint  = \"St Emile\";\n    break;\n    case 23: $saint  = \"St Didier\";\n    break;\n    case 24: $saint  = \"St Donatien\";\n    break;\n    case 25: $saint  = \"Ste Sophie\";\n    break;\n    case 26: $saint  = \"St Béranger\";\n    break;\n    case 27: $saint  = \"St Augustin\";\n    break;\n    case 28: $saint  = \"St Germain\";\n    break;\n    case 29: $saint  = \"St Aymard\";\n    break;\n    case 30: $saint  = \"St Ferdinand\";\n    break;\n    case 31: $saint  = \"Visitation\";\n    break;\n    }\n    break;\n    case 6:\n        switch($jour)\n        {\n    case 1: $saint  = \"St Justin\";\n    break;\n    case 2: $saint  = \"Ste Blandine\";\n    break;\n    case 3: $saint  = \"St Kévin\";\n    break;\n    case 4: $saint  = \"Ste Clotilde\";\n    break;\n    case 5: $saint  = \"St Igor\";\n    break;\n    case 6: $saint  = \"St Norbert\";\n    break;\n    case 7: $saint  = \"St Gilbert\";\n    break;\n    case 8: $saint  = \"St Médard\";\n    break;\n    case 9: $saint  = \"Ste Diane\";\n    break;\n    case 10: $saint  = \"St Landry\";\n    break;\n    case 11: $saint  = \"St Barnabé\";\n    break;\n    case 12: $saint  = \"St Guy\";\n    break;\n    case 13: $saint  = \"St Antoine de P.\";\n    break;\n    case 14: $saint  = \"St Elisée\";\n    break;\n    case 15: $saint  = \"Ste Germaine\";\n    break;\n    case 16: $saint  = \"St J-F Régis\";\n    break;\n    case 17: $saint  = \"St Hervé\";\n    break;\n    case 18: $saint  = \"St Léonce\";\n    break;\n    case 19: $saint  = \"St Romuald\";\n    break;\n    case 20: $saint  = \"St Silvère\";\n    break;\n    case 21: $saint  = \"Eté\";\n    break;\n    case 22: $saint  = \"St Alban\";\n    break;\n    case 23: $saint  = \"Ste Audrey\";\n    break;\n    case 24: $saint  = \"St Jean-Baptiste\";\n    break;\n    case 25: $saint  = \"St Prosper\";\n    break;\n    case 26: $saint  = \"St Anthelme\";\n    break;\n    case 27: $saint  = \"St Fernand\";\n    break;\n    case 28: $saint  = \"St Irénée\";\n    break;\n    case 29: $saint  = \"SS Pierre: St Paul\";\n    break;\n    case 30: $saint  = \"St Martial\";\n    break;\n    }\n    break;\n    case 7:\n        switch($jour)\n        {\n    case 1: $saint  = \"St Thierry\";\n    break;\n    case 2: $saint  = \"St Martinien\";\n    break;\n    case 3: $saint  = \"St Thomas\";\n    break;\n    case 4: $saint  = \"St Florent\";\n    break;\n    case 5: $saint  = \"St Antoine-Marie\";\n    break;\n    case 6: $saint  = \"Ste Mariette\";\n    break;\n    case 7: $saint  = \"St Raoul\";\n    break;\n    case 8: $saint  = \"St Thibaut\";\n    break;\n    case 9: $saint  = \"Ste Amandine\";\n    break;\n    case 10: $saint  = \"St Ulrich\";\n    break;\n    case 11: $saint  = \"St Benoît\";\n    break;\n    case 12: $saint  = \"St Olivier\";\n    break;\n    case 13: $saint  = \"SS Henri et Joël\";\n    break;\n    case 14: $saint  = \"Fête Nationale\";\n    break;\n    case 15: $saint  = \"St Donald\";\n    break;\n    case 16: $saint  = \"N-D du Mt-Carmel\";\n    break;\n    case 17: $saint  = \"Ste Charlotte\";\n    break;\n    case 18: $saint  = \"St Frédéric\";\n    break;\n    case 19: $saint  = \"St Arsène\";\n    break;\n    case 20: $saint  = \"Ste Marina\";\n    break;\n    case 21: $saint  = \"St Victor\";\n    break;\n    case 22: $saint  = \"Ste Marie-Madeleine\";\n    break;\n    case 23: $saint  = \"Ste Brigitte\";\n    break;\n    case 24: $saint  = \"Ste Christine\";\n    break;\n    case 25: $saint  = \"St Jacques\";\n    break;\n    case 26: $saint  = \"SS Anne et Joachim\";\n    break;\n    case 27: $saint  = \"Ste Nathalie\";\n    break;\n    case 28: $saint  = \"St Samson\";\n    break;\n    case 29: $saint  = \"Ste Marthe\";\n    break;\n    case 30: $saint  = \"Ste Juliette\";\n    break;\n    case 31: $saint  = \"St Ignace de Loyola\";\n    break;\n    }\n    break;\n    case 8:\n        switch($jour)\n        {\n    case 1: $saint = \"St Alphonse\";\n    break;\n    case 2: $saint = \"St Julien Eymard\";\n    break;\n    case 3: $saint = \"Ste Lydie\";\n    break;\n    case 4: $saint = \"St J-M Vianney\";\n    break;\n    case 5: $saint = \"St Abel\";\n    break;\n    case 6: $saint = \"Transfiguration\";\n    break;\n    case 7: $saint = \"St Gaëtan\";\n    break;\n    case 8: $saint = \"St Dominique\";\n    break;\n    case 9: $saint = \"St Amour\";\n    break;\n    case 10: $saint = \"St Laurent\";\n    break;\n    case 11: $saint = \"Ste Claire\";\n    break;\n    case 12: $saint = \"Ste Clarisse\";\n    break;\n    case 13: $saint = \"St Hippolyte\";\n    break;\n    case 14: $saint = \"St Evrard\";\n    break;\n    case 15: $saint = \"Assomption\";\n    break;\n    case 16: $saint = \"St Armel\";\n    break;\n    case 17: $saint = \"St Hyacinthe\";\n    break;\n    case 18: $saint = \"Ste Hélène\";\n    break;\n    case 19: $saint = \"St Jean Eudes\";\n    break;\n    case 20: $saint = \"St Bernard\";\n    break;\n    case 21: $saint = \"St Christophe\";\n    break;\n    case 22: $saint = \"St Fabrice\";\n    break;\n    case 23: $saint = \"Ste Rose de Lima\";\n    break;\n    case 24: $saint = \"St Barthélémy\";\n    break;\n    case 25: $saint = \"St Louis\";\n    break;\n    case 26: $saint = \"Ste Natacha\";\n    break;\n    case 27: $saint = \"Ste Monique\";\n    break;\n    case 28: $saint = \"St Augustin\";\n    break;\n    case 29: $saint = \"Ste Sabine\";\n    break;\n    case 30: $saint = \"St Fiacre\";\n    break;\n    case 31: $saint = \"St Aristide\";\n    break;\n    }\n    break;\n    case 9:\n        switch($jour)\n        {\n    case 1: $saint  = \"St Gilles\";\n    break;\n    case 2: $saint  = \"Ste Ingrid\";\n    break;\n    case 3: $saint  = \"St Grégoire\";\n    break;\n    case 4: $saint  = \"Ste Rosalie\";\n    break;\n    case 5: $saint  = \"Ste Raïssa\";\n    break;\n    case 6: $saint  = \"St Bertrand\";\n    break;\n    case 7: $saint  = \"Ste Reine\";\n    break;\n    case 8: $saint  = \"Nativité de N-D\";\n    break;\n    case 9: $saint  = \"St Alain\";\n    break;\n    case 10: $saint  = \"Ste Inès\";\n    break;\n    case 11: $saint  = \"St Adolphe\";\n    break;\n    case 12: $saint  = \"St Apollinaire\";\n    break;\n    case 13: $saint  = \"St Aimé\";\n    break;\n    case 14: $saint  = \"La Ste-Croix\";\n    break;\n    case 15: $saint  = \"St Roland\";\n    break;\n    case 16: $saint  = \"Ste Edith\";\n    break;\n    case 17: $saint  = \"St Renaud\";\n    break;\n    case 18: $saint  = \"Ste Nadège\";\n    break;\n    case 19: $saint  = \"Ste Emilie\";\n    break;\n    case 20: $saint  = \"St Davy\";\n    break;\n    case 21: $saint  = \"St Matthieu\";\n    break;\n    case 22: $saint  = \"St Maurice\";\n    break;\n    case 23: $saint  = \"St Constant\";\n    break;\n    case 24: $saint  = \"St Thècle\";\n    break;\n    case 25: $saint  = \"St Hermann\";\n    break;\n    case 26: $saint  = \"St Côme\";\n    break;\n    case 27: $saint  = \"St Vincent de Paul\";\n    break;\n    case 28: $saint  = \"St Venceslas\";\n    break;\n    case 29: $saint  = \"St Michel\";\n    break;\n    case 30: $saint  = \"St Jérôme\";\n    break;\n    }\n    break;\n    case 10:\n        switch($jour)\n        {\n    case 1: $saint  = \"Ste Thérèse de l'E-J\";\n    break;\n    case 2: $saint  = \"St Léger\";\n    break;\n    case 3: $saint  = \"St Gérard\";\n    break;\n    case 4: $saint  = \"St François d'Assise\";\n    break;\n    case 5: $saint  = \"Ste Fleur\";\n    break;\n    case 6: $saint  = \"St Bruno\";\n    break;\n    case 7: $saint  = \"St Serge\";\n    break;\n    case 8: $saint  = \"Ste Pélagie\";\n    break;\n    case 9: $saint  = \"St Denis\";\n    break;\n    case 10: $saint  = \"St Ghislain\";\n    break;\n    case 11: $saint  = \"St Firmin\";\n    break;\n    case 12: $saint  = \"St Wilfrid\";\n    break;\n    case 13: $saint  = \"St Géraud\";\n    break;\n    case 14: $saint  = \"St Juste\";\n    break;\n    case 15: $saint  = \"Ste Thérèse d'Avila\";\n    break;\n    case 16: $saint  = \"Ste Edwige\";\n    break;\n    case 17: $saint  = \"St Baudouin\";\n    break;\n    case 18: $saint  = \"St Luc\";\n    break;\n    case 19: $saint  = \"St René\";\n    break;\n    case 20: $saint  = \"Ste Adeline\";\n    break;\n    case 21: $saint  = \"Ste Céline\";\n    break;\n    case 22: $saint  = \"Ste Elodie\";\n    break;\n    case 23: $saint  = \"St Jean de Capistran\";\n    break;\n    case 24: $saint  = \"St Florentin\";\n    break;\n    case 25: $saint  = \"St Crépin\";\n    break;\n    case 26: $saint  = \"St Dimitri\";\n    break;\n    case 27: $saint  = \"Ste Emeline\";\n    break;\n    case 28: $saint  = \"SS Simon et Juda\";\n    break;\n    case 29: $saint  = \"St Narcisse\";\n    break;\n    case 30: $saint  = \"St Bienvenu\";\n    break;\n    case 31: $saint  = \"St Quentin\";\n    break;\n    }\n    break;\n    case 11:\n        switch($jour)\n        {\n    case 1: $saint    = \"Toussaint\";\n    break;\n    case 2: $saint    = \"Défunts\";\n    break;\n    case 3: $saint    = \"St Hubert\";\n    break;\n    case 4: $saint    = \"St Charles\";\n    break;\n    case 5: $saint    = \"Ste Sylvie\";\n    break;\n    case 6: $saint    = \"Ste Bertille\";\n    break;\n    case 7: $saint    = \"Ste Carine\";\n    break;\n    case 8: $saint    = \"St Geoffroy\";\n    break;\n    case 9: $saint    = \"St Théodore\";\n    break;\n    case 10: $saint    = \"St Léon\";\n    break;\n    case 11: $saint    = \"St Martin\";\n    break;\n    case 12: $saint    = \"St Christian\";\n    break;\n    case 13: $saint    = \"St Brice\";\n    break;\n    case 14: $saint    = \"St Sidoine\";\n    break;\n    case 15: $saint    = \"St Albert\";\n    break;\n    case 16: $saint    = \"Ste Marguerite\";\n    break;\n    case 17: $saint    = \"Ste Elisabeth\";\n    break;\n    case 18: $saint    = \"Ste Aude\";\n    break;\n    case 19: $saint    = \"St Tanguy\";\n    break;\n    case 20: $saint    = \"St Edmond\";\n    break;\n    case 21: $saint    = \"Prés. de Marie\";\n    break;\n    case 22: $saint    = \"Ste Cécile\";\n    break;\n    case 23: $saint    = \"St Clément\";\n    break;\n    case 24: $saint    = \"Ste Flora\";\n    break;\n    case 25: $saint    = \"Ste Catherine\";\n    break;\n    case 26: $saint    = \"Ste Delphine\";\n    break;\n    case 27: $saint    = \"St Séverin\";\n    break;\n    case 28: $saint    = \"St Jacques de la Marche\";\n    break;\n    case 29: $saint    = \"St Saturnin\";\n    break;\n    case 30: $saint    = \"St André\";\n    break;\n    }\n    break;\n    case 12:\n        switch($jour)\n        {\n    case 1: $saint  = \"Ste Florence\";\n    break;\n    case 2: $saint  = \"Ste Viviane\";\n    break;\n    case 3: $saint  = \"St Xavier\";\n    break;\n    case 4: $saint  = \"Ste Barbara\";\n    break;\n    case 5: $saint  = \"St Gérald\";\n    break;\n    case 6: $saint  = \"St Nicolas\";\n    break;\n    case 7: $saint  = \"St Ambroise\";\n    break;\n    case 8: $saint  = \"Imm. Conception\";\n    break;\n    case 9: $saint  = \"St P. Fourier\";\n    break;\n    case 10: $saint  = \"St Romaric\";\n    break;\n    case 11: $saint  = \"St Daniel\";\n    break;\n    case 12: $saint  = \"Ste Jeanne F.-C.\";\n    break;\n    case 13: $saint  = \"Ste Lucie\";\n    break;\n    case 14: $saint  = \"Ste Odile\";\n    break;\n    case 15: $saint  = \"Ste Ninon\";\n    break;\n    case 16: $saint  = \"Ste Alice\";\n    break;\n    case 17: $saint  = \"St Gaël\";\n    break;\n    case 18: $saint  = \"St Gatien\";\n    break;\n    case 19: $saint  = \"St Urbain\";\n    break;\n    case 20: $saint  = \"St Abraham\";\n    break;\n    case 21: $saint  = \"St P. Cenisius\";\n    break;\n    case 22: $saint  = \"Ste Françoise-Xavière\";\n    break;\n    case 23: $saint  = \"St Armand\";\n    break;\n    case 24: $saint  = \"St Adèle\";\n    break;\n    case 25: $saint  = \"Noël\";\n    break;\n    case 26: $saint  = \"St Etienne\";\n    break;\n    case 27: $saint  = \"St Jean\";\n    break;\n    case 28: $saint  = \"St Innocents\";\n    break;\n    case 29: $saint  = \"St David\";\n    break;\n    case 30: $saint  = \"St Roger\";\n    break;\n    case 31: $saint  = \"St Sylvestre\";\n    break;\n    }\n    break;\n    }\n    return $saint;\n    }\n\n$saintDuJour = saint(date('d'),date('m'));\n\n$date = date(\"Y-m-d\");\n$jourDemain = date(\"d\", strtotime($date.'+ 1 days'));\n$moisDemain = date(\"m\", strtotime($date.'+ 1 days'));\n$saintDemain  = saint($jourDemain,$moisDemain);\n$scenario->setLog('|| Saint du jour : '.$saintDuJour);\n$scenario->setLog('|| Saint de demain : '.$saintDemain);\n$tags['#saintJour#'] = $saintDuJour;\n$tags['#saintDemain#'] = $saintDemain;\n$scenario->setLog('|└───────────────────────────');\n$scenario->setLog('└────────────────────────────');\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ JSON \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n$array = Array (\n  \"Soleil\" => Array (\n    \"elevation\" => $tags['#elevation#'],\n    \"elevationZenith\" => $tags['#elevationZenith#'],\n    \"leverSoleil\" => $tags['#leverSoleil#'],\n    \"zenithSoleil\" => $tags['#zenithSoleil#'],\n    \"coucherSoleil\" => $tags['#coucherSoleil#'],\n    \"positionHorizontalSun\" => $tags['#positionHorizontalSun#'],\n    \"positionVerticalSun\" => $tags['#positionVerticalSun#']\n  ),\n  \"Jour\" => Array (\n    \"dureeJour\" => $tags['#dureeJour#'],\n    \"dureeJourEcart\" => $tags['#dureeJourEcart#'],\n    \"modeJour\" => $tags['#modeJour#'],\n    \"weekend\" => $tags['#weekend#'],\n    \"ferie\" => $tags['#ferie#'],\n    \"libelleFerie\" => $tags['#libelleFerie#'],\n    \"dateProchainFerie\" => $tags['#dateProchainFerie#'],    \n    \"libelleProchainFerie\" => $tags['#libelleProchainFerie#'],\n    \"nbProchainFerie\" => $tags['#nbProchainFerie#'],\n    \"saison\" => $tags['#saison#'],\n    \"dateJour\" => $tags['#dateDuJour#']   \n  ),\n  \"Vacances\" => Array (\n    \"vacancesEnCours\" => $tags['#vacancesEnCours#'],\n    \"vacancesEnCoursLibelle\" => $tags['#vacancesEnCoursLibelle#'],\n    \"debutVacancesEnCours\" => $tags['#debutVacancesEnCours#'],\n    \"finVacancesEnCours\" => $tags['#finVacancesEnCours#'],\n    \"vacancesPochainesLibelle\" => $tags['#vacancesPochainesLibelle#'],\n    \"debutVacancesProchaines\" => $tags['#debutVacancesProchaines#'],\n    \"finVacancesProchaines\" => $tags['#finVacancesProchaines#'],\n    \"nbProchainesVacances\" => $tags['#nbProchainesVacances#']\n  ),\n    \"Saints\" => Array (\n    \"saintJour\" => $tags['#saintJour#'],\n    \"saintDemain\" => $tags['#saintDemain#']\n  )\n);\n\n$json = json_encode($array);\n$tags['#json#'] = $json;\n$scenario->setTags($tags);",
                                                "options": [],
                                                "order": "0"
                                            }
                                        ]
                                    }
                                ]
                            }
                        },
                        {
                            "type": "action",
                            "subtype": "",
                            "expression": "event",
                            "options": {
                                "enable": "1",
                                "background": "0",
                                "cmd": "#[Home][Info du jour][json]#",
                                "value": "\"tag(json)\""
                            },
                            "order": "1"
                        }
                    ]
                }
            ]
        }
    ]
}