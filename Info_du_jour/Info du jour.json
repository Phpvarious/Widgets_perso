{
    "name": "Info du jour",
    "isActive": "1",
    "group": "",
    "mode": "schedule",
    "schedule": "*\/5 * * * *",
    "trigger": [
        ""
    ],
    "timeout": "0",
    "object_id": null,
    "isVisible": "0",
    "display": {
        "name": "",
        "icon": "<i class=\"icon divers-today1 icon_blue\"><\/i>",
        "width": "432px",
        "height": "92px"
    },
    "order": "9999",
    "description": "Auteur : @Phpvarious\nGithub --> https:\/\/phpvarious.github.io\/documentation\/widget\/fr_FR\/widget_scenario\/info_du_jour\/\nInfos vacances Max --> 2026\/09\/01, après faudra mettre à jour le scenario.",
    "configuration": {
        "timeDependency": 0,
        "has_return": 0,
        "logmode": "default",
        "allowMultiInstance": "0",
        "syncmode": "0",
        "timeline::enable": "0",
        "timeline::folder": ""
    },
    "elements": [
        {
            "name": null,
            "type": "comment",
            "options": [],
            "order": "0",
            "subElements": [
                {
                    "name": null,
                    "type": "comment",
                    "subtype": "comment",
                    "options": {
                        "collapse": "0"
                    },
                    "order": "0",
                    "expressions": [
                        {
                            "type": "comment",
                            "subtype": null,
                            "expression": "Auteur : @Phpvarious\nDate de création: 04\/12\/2021\nVersion actuelle : 08\/03\/2023",
                            "options": [],
                            "order": "0"
                        }
                    ]
                }
            ]
        },
        {
            "name": null,
            "type": "action",
            "options": [],
            "order": "0",
            "subElements": [
                {
                    "name": null,
                    "type": "action",
                    "subtype": "action",
                    "options": {
                        "collapse": "0",
                        "enable": "1"
                    },
                    "order": "0",
                    "expressions": [
                        {
                            "type": "action",
                            "subtype": null,
                            "expression": "tag",
                            "options": {
                                "enable": "1",
                                "background": "0",
                                "name": "zone",
                                "value": "B"
                            },
                            "order": "0"
                        }
                    ]
                }
            ]
        },
        {
            "name": null,
            "type": "action",
            "options": [],
            "order": "0",
            "subElements": [
                {
                    "name": null,
                    "type": "action",
                    "subtype": "action",
                    "options": {
                        "collapse": "0",
                        "enable": "1"
                    },
                    "order": "0",
                    "expressions": [
                        {
                            "type": "element",
                            "subtype": null,
                            "expression": "1962",
                            "options": [],
                            "order": "0",
                            "element": {
                                "name": null,
                                "type": "code",
                                "options": [],
                                "order": "0",
                                "subElements": [
                                    {
                                        "name": null,
                                        "type": "code",
                                        "subtype": "action",
                                        "options": {
                                            "collapse": "1",
                                            "enable": "1"
                                        },
                                        "order": "0",
                                        "expressions": [
                                            {
                                                "type": "code",
                                                "subtype": null,
                                                "expression": "\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ VACANCES SCOLAIRE \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\n$scenario->setLog('┌─────────────────── VACANCES SCOLAIRE');\n$tags = $scenario->getTags(); \/\/récupère la liste des tags\nif (empty($tags['#zone#'])) $tags['#zone#'] = 'B';\n$zone = $tags['#zone#']; \/\/ A,B ou C pour Vacances\nif ($zone != 'A' && $zone != 'B' && $zone != 'C') $zone = 'B';\n$scenario->setLog('| Zone : '.$zone);\n\/\/$url = \"http:\/\/telechargement.index-education.com\/vacances.xml\"; \/\/ pour Vacances\n$today = date(\"Y\/m\/d\");\n\/\/$today = \"2022\/02\/20\";\n\n$queryLibelleVacances = array(\"Vacances de la Toussaint\",\"Vacances de Noël\",\"Vacances d'hiver\",\"Vacances de printemps\",\"Vacances d'été\",\"Pont de l'Ascension\");\n$queryIdVacances = array(1,2,3,4,5,12);\n\nswitch($zone)\n{\n  case 'A': \n    $queryDebutVacances = array(\"2022\/04\/16\",\"2022\/05\/26\",\"2022\/07\/07\",\"2022\/10\/22\",\"2022\/12\/17\",\"2023\/02\/04\",\"2023\/04\/08\",\"2023\/05\/18\",\"2023\/07\/08\",\"2023\/10\/21\",\"2023\/12\/23\",\"2024\/02\/17\",\"2024\/04\/13\",\"2024\/05\/09\",\"2024\/07\/06\",\"2024\/10\/19\",\"2024\/12\/21\",\"2025\/02\/22\",\"2025\/04\/19\",\"2025\/05\/29\",\"2025\/07\/05\",\"2025\/10\/18\",\"2025\/12\/20\",\"2026\/02\/07\",\"2026\/04\/04\",\"2026\/05\/14\",\"2026\/07\/04\");\n    $queryFinVacances = array(\"2022\/05\/02\",\"2022\/05\/30\",\"2022\/09\/01\",\"2022\/11\/07\",\"2023\/01\/03\",\"2023\/02\/20\",\"2023\/04\/24\",\"2023\/05\/22\",\"2023\/09\/04\",\"2023\/11\/06\",\"2024\/01\/08\",\"2024\/03\/04\",\"2024\/04\/29\",\"2024\/05\/13\",\"2024\/09\/02\",\"2024\/11\/04\",\"2025\/01\/06\",\"2025\/03\/10\",\"2025\/05\/05\",\"2025\/06\/02\",\"2025\/09\/01\",\"2025\/11\/03\",\"2026\/01\/05\",\"2026\/02\/23\",\"2026\/04\/20\",\"2026\/05\/18\",\"2026\/09\/01\");\n    $queryNumVacances = array(4,12,5,1,2,3,4,12,5,1,2,3,4,12,5,1,2,3,4,12,5,1,2,3,4,12,5);    \n    break;\n  case 'B': \n    $queryDebutVacances = array(\"2022\/04\/09\",\"2022\/05\/26\",\"2022\/07\/07\",\"2022\/10\/22\",\"2022\/12\/17\",\"2023\/02\/11\",\"2023\/04\/15\",\"2023\/05\/18\",\"2023\/07\/08\",\"2023\/10\/21\",\"2023\/12\/23\",\"2024\/02\/24\",\"2024\/04\/20\",\"2024\/05\/09\",\"2024\/07\/06\",\"2024\/10\/19\",\"2024\/12\/21\",\"2025\/02\/08\",\"2025\/04\/05\",\"2025\/05\/29\",\"2025\/07\/05\",\"2025\/10\/18\",\"2025\/12\/20\",\"2026\/02\/14\",\"2026\/04\/11\",\"2026\/05\/14\",\"2026\/07\/04\");\n    $queryFinVacances = array(\"2022\/04\/25\",\"2022\/05\/30\",\"2022\/09\/01\",\"2022\/11\/07\",\"2023\/01\/03\",\"2023\/02\/27\",\"2023\/05\/02\",\"2023\/05\/22\",\"2023\/09\/04\",\"2023\/11\/06\",\"2024\/01\/08\",\"2024\/03\/11\",\"2024\/05\/06\",\"2024\/05\/13\",\"2024\/09\/02\",\"2024\/11\/04\",\"2025\/01\/06\",\"2025\/02\/24\",\"2025\/04\/22\",\"2025\/06\/02\",\"2025\/09\/01\",\"2025\/11\/03\",\"2026\/01\/05\",\"2026\/03\/02\",\"2026\/04\/27\",\"2026\/05\/18\",\"2026\/09\/01\");\n    $queryNumVacances = array(4,12,5,1,2,3,4,12,5,1,2,3,4,12,5,1,2,3,4,12,5,1,2,3,4,12,5);  \n    break;    \n  case 'C': \n    $queryDebutVacances = array(\"2022\/04\/23\",\"2022\/05\/26\",\"2022\/07\/07\",\"2022\/10\/22\",\"2022\/12\/17\",\"2023\/02\/18\",\"2023\/04\/22\",\"2023\/05\/18\",\"2023\/07\/08\",\"2023\/10\/21\",\"2023\/12\/23\",\"2024\/02\/10\",\"2024\/04\/06\",\"2024\/05\/09\",\"2024\/07\/06\",\"2024\/10\/19\",\"2024\/12\/21\",\"2025\/02\/15\",\"2025\/04\/12\",\"2025\/05\/29\",\"2025\/07\/05\",\"2025\/10\/18\",\"2025\/12\/20\",\"2026\/02\/21\",\"2026\/04\/18\",\"2026\/05\/14\",\"2026\/07\/04\");\n    $queryFinVacances = array(\"2022\/05\/09\",\"2022\/05\/30\",\"2022\/09\/01\",\"2022\/11\/07\",\"2023\/01\/03\",\"2023\/03\/06\",\"2023\/05\/09\",\"2023\/05\/22\",\"2023\/09\/01\",\"2023\/11\/06\",\"2024\/01\/08\",\"2024\/02\/26\",\"2024\/04\/22\",\"2024\/05\/13\",\"2024\/09\/02\",\"2024\/11\/04\",\"2025\/01\/06\",\"2025\/03\/03\",\"2025\/04\/28\",\"2025\/06\/02\",\"2025\/09\/01\",\"2025\/11\/03\",\"2026\/01\/05\",\"2026\/03\/09\",\"2026\/05\/04\",\"2026\/05\/18\",\"2026\/09\/01\");\n    $queryNumVacances = array(4,12,5,1,2,3,4,12,5,1,2,3,4,12,5,1,2,3,4,12,5,1,2,3,4,12,5); \n    break;\n}\n\n$debutVacances = \"\";\n$finVacances = \"\";\n$enVacances = 0;\n$vacancesEcLibelle = \"\";\n$prochainDebutVacance = \"\";\n$prochainFinVacance = \"\";\n$prochainLibelleVacances = \"\";\n$diffVacances = \"\";\n$erreur = false;\n$findonnee = false;\n\n$nbMax = count($queryDebutVacances);\nif ($nbMax != count($queryFinVacances) || $nbMax != count($queryNumVacances)) $erreur = true;\n$i=0;\nif (!$erreur)\n{    \n  foreach ($queryFinVacances as $vacance) {\n    \/\/if ($today <= $vacance) {\n    if ($today < $vacance) {\n      $key = array_search($queryNumVacances[$i],$queryIdVacances);\n      $libelleVacances = $queryLibelleVacances[$key];\n      if ($queryDebutVacances[$i] <= $today) {\n        $debutVacances = $queryDebutVacances[$i];\n        $finVacances = $vacance;\n        $enVacances = 1;\n        $vacancesEcLibelle = $queryLibelleVacances[$key];\n        $i++;\n        if ($i < $nbMax)\n        {\n          $prochainDebutVacance = $queryDebutVacances[$i];\n          $prochainFinVacance = $queryFinVacances[$i];\n          $key = array_search($queryNumVacances[$i],$queryIdVacances);\n          $prochainLibelleVacance = $queryLibelleVacances[$key];\n        }\n        else $findonnee = true;\n      } \n      else \n      {        \n        $prochainDebutVacance = $queryDebutVacances[$i];\n        $prochainFinVacance = $vacance;\n        $prochainLibelleVacance = $libelleVacances;\n      }\n      break;      \n    }\n    else if ($i == ($nbMax-1)) $findonnee = true;\n    $i++;\n  } \n  if (!$findonnee){\n    $diffDebutVacance = new DateTime($prochainDebutVacance);\n    $diffToday = new DateTime($today);\n    $diffVacances = $diffDebutVacance->diff($diffToday)->format(\"%a\");\n\n    $debutVacancesWidget = ($debutVacances != \"\") ? date(\"d\/m\/Y\",strtotime($debutVacances)):\"\";\n    $debutVacancesScenario = ($debutVacances != \"\") ? date(\"Y-m-d\",strtotime($debutVacances)):\"\";\n    $finVacancesWidget = ($finVacances != \"\") ? date(\"d\/m\/Y\",strtotime($finVacances)):\"\";\n    $finVacancesScenario = ($finVacances != \"\") ? date(\"Y-m-d\",strtotime($finVacances)):\"\";\n    \n    $prochainDebutVacanceWidget = ($prochainDebutVacance != \"\") ? date(\"d\/m\/Y\",strtotime($prochainDebutVacance)):\"\";\n    $prochainDebutVacanceScenario = ($prochainDebutVacance != \"\") ? date(\"Y-m-d\",strtotime($prochainDebutVacance)):\"\";    \/\/erreur\n    $prochainFinVacanceWidget = ($prochainFinVacance != \"\") ? date(\"d\/m\/Y\",strtotime($prochainFinVacance)):\"\";\n    $prochainFinVacanceScenario = ($prochainFinVacance != \"\") ? date(\"Y-m-d\",strtotime($prochainFinVacance)):\"\";\n    \n    $scenario->setLog('| ------------------ EN COURS -----------------');\n    $scenario->setLog('| tag(vacancesEnCours) : '.$enVacances);\n    $scenario->setLog('| tag(vacancesEnCoursLibelle) : '.$vacancesEcLibelle);\n    $scenario->setLog('| tag(debutVacancesEnCours) : '.$debutVacancesScenario);\n    $scenario->setLog('| tag(finVacancesEnCours) : '.$finVacancesScenario);\n    $scenario->setLog('| ------------------ PROCHAIN -----------------');\n    $scenario->setLog('| tag(vacancesPochainesLibelle) : '.$prochainLibelleVacance);\n    $scenario->setLog('| tag(debutVacancesProchaines) : '.$prochainDebutVacanceScenario);\n    $scenario->setLog('| tag(finVacancesProchaines) : '.$prochainFinVacanceScenario);   \n    $scenario->setLog('| tag(nbProchainesVacances) : '.$diffVacances);\n  }\n  else $scenario->setLog('| [ERROR] Veuillez mettre a jour les données pour les vacances !!!');\n}\nelse $scenario->setLog('| [ERROR] Une erreur a été detectée dans les données de configuration des vacances !!!');\n\n$tags['#vacancesEnCours#'] = $enVacances;\n$tags['#vacancesEnCoursLibelle#'] = $vacancesEcLibelle;\n$tags['#debutVacancesEnCours#'] = '\"'.$debutVacancesScenario.'\"';\n$tags['#finVacancesEnCours#'] = '\"'.$finVacancesScenario.'\"';\n\n$tags['#vacancesPochainesLibelle#'] = $prochainLibelleVacance;\n$tags['#debutVacancesProchaines#'] = '\"'.$prochainDebutVacanceScenario.'\"';\n$tags['#finVacancesProchaines#'] = '\"'.$prochainFinVacanceScenario.'\"';\n$tags['#nbProchainesVacances#'] = $diffVacances;\n\n$tags['#json#']['Vacances'] = Array (\n    \"vacancesEnCours\" => $enVacances,\n    \"vacancesEnCoursLibelle\" => $vacancesEcLibelle,\n    \"debutVacancesEnCours\" => $debutVacancesWidget,\n    \"finVacancesEnCours\" => $finVacancesWidget,\n    \"vacancesPochainesLibelle\" => $prochainLibelleVacance,\n    \"debutVacancesProchaines\" => $prochainDebutVacanceWidget,\n    \"finVacancesProchaines\" => $prochainFinVacanceWidget,\n    \"nbProchainesVacances\" => $diffVacances\n  );\n$scenario->setTags($tags);\n$scenario->setLog('└───────────────────────────');",
                                                "options": [],
                                                "order": "0"
                                            }
                                        ]
                                    }
                                ]
                            }
                        },
                        {
                            "type": "element",
                            "subtype": null,
                            "expression": "1963",
                            "options": [],
                            "order": "1",
                            "element": {
                                "name": null,
                                "type": "code",
                                "options": [],
                                "order": "0",
                                "subElements": [
                                    {
                                        "name": null,
                                        "type": "code",
                                        "subtype": "action",
                                        "options": {
                                            "collapse": "1",
                                            "enable": "1"
                                        },
                                        "order": "0",
                                        "expressions": [
                                            {
                                                "type": "code",
                                                "subtype": null,
                                                "expression": "\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ SAINT DU JOUR \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n$scenario->setLog('┌─────────────────── SAINT DU JOUR');\n$tags = $scenario->getTags(); \/\/récupère la liste des tags\nfunction saint($jour,$mois){\n  switch($mois)\n  {\n    case 1:\n      switch($jour)\n      {\n        case 1: $saint = \"Jour de l'an\";\n        break;\n        case 2: $saint = \"Saint Basile\";\n            break;\n        case 3: $saint = \"Sainte Geneviève\";\n            break;\n        case 4: $saint = \"Saint Odilon\";\n            break;\n        case 5: $saint = \"Saint Edouard\";\n            break;\n        case 6: $saint = \"Sainte Mélanie\";\n            break;\n        case 7: $saint = \"Saint Raymond\";\n            break;\n        case 8: $saint = \"Saint Lucien\";\n            break;\n        case 9: $saint = \"Sainte Alix\";\n            break;\n        case 10: $saint = \"Saint Guillaume\";\n            break;\n        case 11: $saint = \"Saint Paulin\";\n            break;\n        case 12: $saint = \"Sainte Tatiana\";\n            break;\n        case 13: $saint  = \"Sainte Yvette\";\n            break;\n        case 14: $saint  = \"Sainte Nina\";\n            break;\n        case 15: $saint  = \"Saint Rémi\";\n            break;\n        case 16: $saint  = \"Saint Marcel\";\n            break;\n        case 17: $saint  = \"Sainte Roseline\";\n            break;\n        case 18: $saint  = \"Sainte Prisca\";\n            break;\n        case 19: $saint  = \"Saint Marius\";\n            break;\n        case 20: $saint  = \"Saint Sébastien\";\n            break;\n        case 21: $saint  = \"Sainte Agnès\";\n            break;\n        case 22: $saint = \"Saint Vincent\";\n            break;\n        case 23: $saint = \"Saint Barnard\";\n            break;\n        case 24: $saint = \"Saint François\";\n            break;\n        case 25: $saint = \"Conv de Saint Paul\";\n            break;\n        case 26: $saint = \"Saint Timothée\";\n            break;\n        case 27: $saint = \"Sainte Angèle\";\n            break;\n        case 28: $saint = \"Saint Thomas d'Aquin\";\n            break;\n        case 29: $saint = \"Saint Gildas\";\n            break;\n        case 30: $saint = \"Sainte Martine\";\n            break;\n        case 31: $saint = \"Sainte Marcelle\";\n        break;\n      }\n      break;\n    case 2:\n      switch($jour)\n      {\n        case 1: $saint = \"Sainte Ella\";\n          break;\n        case 2: $saint = \"Présentation\";\n          break;\n        case 3: $saint = \"Saint Blaise\";\n          break;\n        case 4: $saint = \"Sainte Véronique\";\n          break;\n        case 5: $saint = \"Sainte Agathe\";\n          break;\n        case 6: $saint = \"Saint Gaston\";\n          break;\n        case 7: $saint = \"Sainte Eugénie\";\n          break;\n        case 8: $saint = \"Sainte Jacqueline\";\n          break;\n        case 9: $saint = \"Sainte Apolline\";\n          break;\n        case 10: $saint = \"Saint Arnaud\";\n          break;\n        case 11: $saint = \"N-D de Lourdes\";\n          break;\n        case 12: $saint = \"Saint Félix\";\n          break;\n        case 13: $saint = \"Sainte Béatrice\";\n          break;\n        case 14: $saint = \"Saint Valentin\";\n          break;\n        case 15: $saint = \"Saint Claude\";\n          break;\n        case 16: $saint = \"Sainte Julienne\";\n          break;\n        case 17: $saint = \"Saint Alexis\";\n          break;\n        case 18: $saint = \"Sainte Bernadette\";\n          break;\n        case 19: $saint = \"Saint Gabin\";\n          break;\n        case 20: $saint = \"Sainte Aimée\";\n          break;\n        case 21: $saint = \"Saint Damien\";\n          break;\n        case 22: $saint = \"Sainte Isabelle\";\n          break;\n        case 23: $saint = \"Saint Lazare\";\n          break;\n        case 24: $saint = \"Saint Modeste\";\n          break;\n        case 25: $saint = \"Saint Roméo\";\n          break;\n        case 26: $saint = \"Saint Nestor\";\n          break;\n        case 27: $saint = \"Sainte Honorine\";\n          break;\n        case 28: $saint = \"Saint Romain\";\n          break;\n        case 29: $saint = \"Saint Auguste\";\n          break;\n      }\n    break;\n    case 3:\n      switch($jour)\n      {\n        case 1: $saint  = \"Saint Aubin\";\n    break;\n        case 2: $saint  = \"Saint Charles\";\n    break;\n        case 3: $saint  = \"Saint Guénolé\";\n    break;\n    case 4: $saint  = \"Saint Casimir\";\n    break;\n    case 5: $saint  = \"Sainte Olive\";\n    break;\n    case 6: $saint  = \"Sainte Colette\";\n    break;\n    case 7: $saint  = \"Sainte Félicité\";\n    break;\n    case 8: $saint  = \"Saint Jean de Dieu\";\n    break;\n    case 9: $saint  = \"Sainte Françoise\";\n    break;\n    case 10: $saint  = \"Saint Vivien\";\n    break;\n    case 11: $saint  = \"Sainte Rosine\";\n    break;\n    case 12: $saint  = \"Sainte Justine\";\n    break;\n    case 13: $saint  = \"Saint Rodrigue\";\n    break;\n    case 14: $saint  = \"Sainte Mathilde\";\n    break;\n    case 15: $saint  = \"Sainte Louise\";\n    break;\n    case 16: $saint  = \"Sainte Bénédicte\";\n    break;\n    case 17: $saint  = \"Saint Patrice\";\n    break;\n    case 18: $saint  = \"Saint Cyrille\";\n    break;\n    case 19: $saint  = \"Saint Joseph\";\n    break;\n    case 20: $saint  = \"Saint Herbert\";\n    break;\n    case 21: $saint  = \"Sainte Clémence\";\n    break;\n    case 22: $saint  = \"Sainte Léa\";\n    break;\n    case 23: $saint  = \"Saint Victorien\";\n    break;\n    case 24: $saint  = \"Sainte Catherine de Suède\";\n    break;\n    case 25: $saint  = \"Annonciation\";\n    break;\n    case 26: $saint  = \"Sainte Larissa\";\n    break;\n    case 27: $saint  = \"Saint Habib\";\n    break;\n    case 28: $saint  = \"Saint Gontran\";\n    break;\n    case 29: $saint  = \"Sainte Gwladys\";\n    break;\n    case 30: $saint  = \"Saint Amédée\";\n    break;\n    case 31: $saint  = \"Saint Benjamin\";\n    break;\n    }\n    break;\n    case 4:\n        switch($jour)\n        {\n        \n    case 1: $saint  = \"Saint Hughes\";\n    break;\n    case 2: $saint  = \"Sainte Sandrine\";\n    break;\n    case 3: $saint  = \"Saint Richard\";\n    break;\n    case 4: $saint  = \"Saint Isidore\";\n    break;\n    case 5: $saint  = \"Sainte Irène\";\n    break;\n    case 6: $saint  = \"Saint Marcellin\";\n    break;\n    case 7: $saint  = \"Saint J-B de la Salle\";\n    break;\n    case 8: $saint  = \"Sainte Julie\";\n    break;\n    case 9: $saint  = \"Saint Gautier\";\n    break;\n    case 10: $saint  = \"Saint Fulbert\";\n    break;\n    case 11: $saint  = \"Saint Stanislas\";\n    break;\n    case 12: $saint  = \"Sainte Jules\";\n    break;\n    case 13: $saint  = \"Sainte Ida\";\n    break;\n    case 14: $saint  = \"Saint Maxime\";\n    break;\n    case 15: $saint  = \"Saint Paterne\";\n    break;\n    case 16: $saint  = \"Saint Benoît-Joseph\";\n    break;\n    case 17: $saint  = \"Saint Anicet\";\n    break;\n    case 18: $saint  = \"Saint Parfait\";\n    break;\n    case 19: $saint  = \"Sainte Emma\";\n    break;\n    case 20: $saint  = \"Sainte Odette\";\n    break;\n    case 21: $saint  = \"Saint Anselme\";\n    break;\n    case 22: $saint  = \"Saint Alexandre\";\n    break;\n    case 23: $saint  = \"Saint Georges\";\n    break;\n    case 24: $saint  = \"Saint Fidèle\";\n    break;\n    case 25: $saint  = \"Saint Marc\";\n    break;\n    case 26: $saint  = \"Sainte Alida\";\n    break;\n    case 27: $saint  = \"Sainte Zita\";\n    break;\n    case 28: $saint  = \"Sainte Valérie\";\n    break;\n    case 29: $saint  = \"Sainte Cath. de Sienne\";\n    break;\n    case 30: $saint  = \"Saint Robert\";\n    break;\n    }\n    break;\n    case 5:\n        switch($jour)\n        {\n        \n    case 1: $saint  = \"Fête du Travail\";\n    break;\n    case 2: $saint  = \"Saint Boris\";\n    break;\n    case 3: $saint  = \"Saint Philippe - Jacques\";\n    break;\n    case 4: $saint  = \"Saint Sylvain\";\n    break;\n    case 5: $saint  = \"Sainte Judith\";\n    break;\n    case 6: $saint  = \"Sainte Prudence\";\n    break;\n    case 7: $saint  = \"Sainte Gisèle\";\n    break;\n    case 8: $saint  = \"Armistice 1945\";\n    break;\n    case 9: $saint  = \"Sainte Pacôme\";\n    break;\n    case 10: $saint  = \"Sainte Solange\";\n    break;\n    case 11: $saint  = \"Sainte Estelle\";\n    break;\n    case 12: $saint  = \"Saint Achille\";\n    break;\n    case 13: $saint  = \"Sainte Rolande\";\n    break;\n    case 14: $saint  = \"Saint Matthias\";\n    break;\n    case 15: $saint  = \"Sainte Denise\";\n    break;\n    case 16: $saint  = \"Saint Honoré\";\n    break;\n    case 17: $saint  = \"Saint Pascal\";\n    break;\n    case 18: $saint  = \"Saint Eric\";\n    break;\n    case 19: $saint  = \"Saint Yves\";\n    break;\n    case 20: $saint  = \"Saint Bernardin\";\n    break;\n    case 21: $saint  = \"Saint Constantin\";\n    break;\n    case 22: $saint  = \"Saint Emile\";\n    break;\n    case 23: $saint  = \"Saint Didier\";\n    break;\n    case 24: $saint  = \"Saint Donatien\";\n    break;\n    case 25: $saint  = \"Sainte Sophie\";\n    break;\n    case 26: $saint  = \"Saint Béranger\";\n    break;\n    case 27: $saint  = \"Saint Augustin\";\n    break;\n    case 28: $saint  = \"Saint Germain\";\n    break;\n    case 29: $saint  = \"Saint Aymard\";\n    break;\n    case 30: $saint  = \"Saint Ferdinand\";\n    break;\n    case 31: $saint  = \"Visitation\";\n    break;\n    }\n    break;\n    case 6:\n        switch($jour)\n        {\n    case 1: $saint  = \"Saint Justin\";\n    break;\n    case 2: $saint  = \"Sainte Blandine\";\n    break;\n    case 3: $saint  = \"Saint Kévin\";\n    break;\n    case 4: $saint  = \"Sainte Clotilde\";\n    break;\n    case 5: $saint  = \"Saint Igor\";\n    break;\n    case 6: $saint  = \"Saint Norbert\";\n    break;\n    case 7: $saint  = \"Saint Gilbert\";\n    break;\n    case 8: $saint  = \"Saint Médard\";\n    break;\n    case 9: $saint  = \"Sainte Diane\";\n    break;\n    case 10: $saint  = \"Saint Landry\";\n    break;\n    case 11: $saint  = \"Saint Barnabé\";\n    break;\n    case 12: $saint  = \"Saint Guy\";\n    break;\n    case 13: $saint  = \"Saint Antoine de P.\";\n    break;\n    case 14: $saint  = \"Saint Elisée\";\n    break;\n    case 15: $saint  = \"Sainte Germaine\";\n    break;\n    case 16: $saint  = \"Saint J-F Régis\";\n    break;\n    case 17: $saint  = \"Saint Hervé\";\n    break;\n    case 18: $saint  = \"Saint Léonce\";\n    break;\n    case 19: $saint  = \"Saint Romuald\";\n    break;\n    case 20: $saint  = \"Saint Silvère\";\n    break;\n    case 21: $saint  = \"Eté\";\n    break;\n    case 22: $saint  = \"Saint Alban\";\n    break;\n    case 23: $saint  = \"Sainte Audrey\";\n    break;\n    case 24: $saint  = \"Saint Jean-Baptiste\";\n    break;\n    case 25: $saint  = \"Saint Prosper\";\n    break;\n    case 26: $saint  = \"Saint Anthelme\";\n    break;\n    case 27: $saint  = \"Saint Fernand\";\n    break;\n    case 28: $saint  = \"Saint Irénée\";\n    break;\n    case 29: $saint  = \"Saint Pierre - Paul\";\n    break;\n    case 30: $saint  = \"Saint Martial\";\n    break;\n    }\n    break;\n    case 7:\n        switch($jour)\n        {\n    case 1: $saint  = \"Saint Thierry\";\n    break;\n    case 2: $saint  = \"Saint Martinien\";\n    break;\n    case 3: $saint  = \"Saint Thomas\";\n    break;\n    case 4: $saint  = \"Saint Florent\";\n    break;\n    case 5: $saint  = \"Saint Antoine-Marie\";\n    break;\n    case 6: $saint  = \"Sainte Mariette\";\n    break;\n    case 7: $saint  = \"Saint Raoul\";\n    break;\n    case 8: $saint  = \"Saint Thibaut\";\n    break;\n    case 9: $saint  = \"Sainte Amandine\";\n    break;\n    case 10: $saint  = \"Saint Ulrich\";\n    break;\n    case 11: $saint  = \"Saint Benoît\";\n    break;\n    case 12: $saint  = \"Saint Olivier\";\n    break;\n    case 13: $saint  = \"Saint Henri - Joël\";\n    break;\n    case 14: $saint  = \"Fête Nationale\";\n    break;\n    case 15: $saint  = \"Saint Donald\";\n    break;\n    case 16: $saint  = \"N-D du Mt-Carmel\";\n    break;\n    case 17: $saint  = \"Sainte Charlotte\";\n    break;\n    case 18: $saint  = \"Saint Frédéric\";\n    break;\n    case 19: $saint  = \"Saint Arsène\";\n    break;\n    case 20: $saint  = \"Sainte Marina\";\n    break;\n    case 21: $saint  = \"Saint Victor\";\n    break;\n    case 22: $saint  = \"Sainte Marie-Madeleine\";\n    break;\n    case 23: $saint  = \"Sainte Brigitte\";\n    break;\n    case 24: $saint  = \"Sainte Christine\";\n    break;\n    case 25: $saint  = \"Saint Jacques\";\n    break;\n    case 26: $saint  = \"Sainte Anne - Joachim\";\n    break;\n    case 27: $saint  = \"Sainte Nathalie\";\n    break;\n    case 28: $saint  = \"Saint Samson\";\n    break;\n    case 29: $saint  = \"Sainte Marthe\";\n    break;\n    case 30: $saint  = \"Sainte Juliette\";\n    break;\n    case 31: $saint  = \"Saint Ignace de Loyola\";\n    break;\n    }\n    break;\n    case 8:\n        switch($jour)\n        {\n    case 1: $saint = \"Saint Alphonse\";\n    break;\n    case 2: $saint = \"Saint Julien Eymard\";\n    break;\n    case 3: $saint = \"Sainte Lydie\";\n    break;\n    case 4: $saint = \"Saint J-M Vianney\";\n    break;\n    case 5: $saint = \"Saint Abel\";\n    break;\n    case 6: $saint = \"Transfiguration\";\n    break;\n    case 7: $saint = \"Saint Gaëtan\";\n    break;\n    case 8: $saint = \"Saint Dominique\";\n    break;\n    case 9: $saint = \"Saint Amour\";\n    break;\n    case 10: $saint = \"Saint Laurent\";\n    break;\n    case 11: $saint = \"Sainte Claire\";\n    break;\n    case 12: $saint = \"Sainte Clarisse\";\n    break;\n    case 13: $saint = \"Saint Hippolyte\";\n    break;\n    case 14: $saint = \"Saint Evrard\";\n    break;\n    case 15: $saint = \"Assomption\";\n    break;\n    case 16: $saint = \"Saint Armel\";\n    break;\n    case 17: $saint = \"Saint Hyacinthe\";\n    break;\n    case 18: $saint = \"Sainte Hélène\";\n    break;\n    case 19: $saint = \"Saint Jean Eudes\";\n    break;\n    case 20: $saint = \"Saint Bernard\";\n    break;\n    case 21: $saint = \"Saint Christophe\";\n    break;\n    case 22: $saint = \"Saint Fabrice\";\n    break;\n    case 23: $saint = \"Sainte Rose de Lima\";\n    break;\n    case 24: $saint = \"Saint Barthélémy\";\n    break;\n    case 25: $saint = \"Saint Louis\";\n    break;\n    case 26: $saint = \"Sainte Natacha\";\n    break;\n    case 27: $saint = \"Sainte Monique\";\n    break;\n    case 28: $saint = \"Saint Augustin\";\n    break;\n    case 29: $saint = \"Sainte Sabine\";\n    break;\n    case 30: $saint = \"Saint Fiacre\";\n    break;\n    case 31: $saint = \"Saint Aristide\";\n    break;\n    }\n    break;\n    case 9:\n        switch($jour)\n        {\n    case 1: $saint  = \"Saint Gilles\";\n    break;\n    case 2: $saint  = \"Sainte Ingrid\";\n    break;\n    case 3: $saint  = \"Saint Grégoire\";\n    break;\n    case 4: $saint  = \"Sainte Rosalie\";\n    break;\n    case 5: $saint  = \"Sainte Raïssa\";\n    break;\n    case 6: $saint  = \"Saint Bertrand\";\n    break;\n    case 7: $saint  = \"Sainte Reine\";\n    break;\n    case 8: $saint  = \"Nativité de N-D\";\n    break;\n    case 9: $saint  = \"Saint Alain\";\n    break;\n    case 10: $saint  = \"Sainte Inès\";\n    break;\n    case 11: $saint  = \"Saint Adolphe\";\n    break;\n    case 12: $saint  = \"Saint Apollinaire\";\n    break;\n    case 13: $saint  = \"Saint Aimé\";\n    break;\n    case 14: $saint  = \"La Sainte-Croix\";\n    break;\n    case 15: $saint  = \"Saint Roland\";\n    break;\n    case 16: $saint  = \"Sainte Edith\";\n    break;\n    case 17: $saint  = \"Saint Renaud\";\n    break;\n    case 18: $saint  = \"Sainte Nadège\";\n    break;\n    case 19: $saint  = \"Sainte Emilie\";\n    break;\n    case 20: $saint  = \"Saint Davy\";\n    break;\n    case 21: $saint  = \"Saint Matthieu\";\n    break;\n    case 22: $saint  = \"Saint Maurice\";\n    break;\n    case 23: $saint  = \"Saint Constant\";\n    break;\n    case 24: $saint  = \"Saint Thècle\";\n    break;\n    case 25: $saint  = \"Saint Hermann\";\n    break;\n    case 26: $saint  = \"Saint Côme - Damien\";\n    break;\n    case 27: $saint  = \"Saint Vincent de Paul\";\n    break;\n    case 28: $saint  = \"Saint Venceslas\";\n    break;\n    case 29: $saint  = \"Saint Michel\";\n    break;\n    case 30: $saint  = \"Saint Jérôme\";\n    break;\n    }\n    break;\n    case 10:\n        switch($jour)\n        {\n    case 1: $saint  = \"Sainte Thérèse de l'E-J\";\n    break;\n    case 2: $saint  = \"Saint Léger\";\n    break;\n    case 3: $saint  = \"Saint Gérard\";\n    break;\n    case 4: $saint  = \"Saint François d'Assise\";\n    break;\n    case 5: $saint  = \"Sainte Fleur\";\n    break;\n    case 6: $saint  = \"Saint Bruno\";\n    break;\n    case 7: $saint  = \"Saint Serge\";\n    break;\n    case 8: $saint  = \"Sainte Pélagie\";\n    break;\n    case 9: $saint  = \"Saint Denis\";\n    break;\n    case 10: $saint  = \"Saint Ghislain\";\n    break;\n    case 11: $saint  = \"Saint Firmin\";\n    break;\n    case 12: $saint  = \"Saint Wilfrid\";\n    break;\n    case 13: $saint  = \"Saint Géraud\";\n    break;\n    case 14: $saint  = \"Saint Juste\";\n    break;\n    case 15: $saint  = \"Sainte Thérèse d'Avila\";\n    break;\n    case 16: $saint  = \"Sainte Edwige\";\n    break;\n    case 17: $saint  = \"Saint Baudouin\";\n    break;\n    case 18: $saint  = \"Saint Luc\";\n    break;\n    case 19: $saint  = \"Saint René\";\n    break;\n    case 20: $saint  = \"Sainte Adeline\";\n    break;\n    case 21: $saint  = \"Sainte Céline\";\n    break;\n    case 22: $saint  = \"Sainte Elodie\";\n    break;\n    case 23: $saint  = \"Saint Jean de Capistran\";\n    break;\n    case 24: $saint  = \"Saint Florentin\";\n    break;\n    case 25: $saint  = \"Saint Crépin\";\n    break;\n    case 26: $saint  = \"Saint Dimitri\";\n    break;\n    case 27: $saint  = \"Sainte Emeline\";\n    break;\n    case 28: $saint  = \"Saint Simon - Juda\";\n    break;\n    case 29: $saint  = \"Saint Narcisse\";\n    break;\n    case 30: $saint  = \"Saint Bienvenu\";\n    break;\n    case 31: $saint  = \"Saint Quentin\";\n    break;\n    }\n    break;\n    case 11:\n        switch($jour)\n        {\n    case 1: $saint    = \"Toussaint\";\n    break;\n    case 2: $saint    = \"Défunts\";\n    break;\n    case 3: $saint    = \"Saint Hubert\";\n    break;\n    case 4: $saint    = \"Saint Charles\";\n    break;\n    case 5: $saint    = \"Sainte Sylvie\";\n    break;\n    case 6: $saint    = \"Sainte Bertille\";\n    break;\n    case 7: $saint    = \"Sainte Carine\";\n    break;\n    case 8: $saint    = \"Saint Geoffroy\";\n    break;\n    case 9: $saint    = \"Saint Théodore\";\n    break;\n    case 10: $saint    = \"Saint Léon\";\n    break;\n    case 11: $saint    = \"Saint Martin\";\n    break;\n    case 12: $saint    = \"Saint Christian\";\n    break;\n    case 13: $saint    = \"Saint Brice\";\n    break;\n    case 14: $saint    = \"Saint Sidoine\";\n    break;\n    case 15: $saint    = \"Saint Albert\";\n    break;\n    case 16: $saint    = \"Sainte Marguerite\";\n    break;\n    case 17: $saint    = \"Sainte Elisabeth\";\n    break;\n    case 18: $saint    = \"Sainte Aude\";\n    break;\n    case 19: $saint    = \"Saint Tanguy\";\n    break;\n    case 20: $saint    = \"Saint Edmond\";\n    break;\n    case 21: $saint    = \"Prés. de Marie\";\n    break;\n    case 22: $saint    = \"Sainte Cécile\";\n    break;\n    case 23: $saint    = \"Saint Clément\";\n    break;\n    case 24: $saint    = \"Sainte Flora\";\n    break;\n    case 25: $saint    = \"Sainte Catherine\";\n    break;\n    case 26: $saint    = \"Sainte Delphine\";\n    break;\n    case 27: $saint    = \"Saint Séverin\";\n    break;\n    case 28: $saint    = \"Saint Jacques de la Marche\";\n    break;\n    case 29: $saint    = \"Saint Saturnin\";\n    break;\n    case 30: $saint    = \"Saint André\";\n    break;\n    }\n    break;\n    case 12:\n        switch($jour)\n        {\n    case 1: $saint  = \"Sainte Florence\";\n    break;\n    case 2: $saint  = \"Sainte Viviane\";\n    break;\n    case 3: $saint  = \"Saint Xavier\";\n    break;\n    case 4: $saint  = \"Sainte Barbara\";\n    break;\n    case 5: $saint  = \"Saint Gérald\";\n    break;\n    case 6: $saint  = \"Saint Nicolas\";\n    break;\n    case 7: $saint  = \"Saint Ambroise\";\n    break;\n    case 8: $saint  = \"Imm. Conception\";\n    break;\n    case 9: $saint  = \"Saint P. Fourier\";\n    break;\n    case 10: $saint  = \"Saint Romaric\";\n    break;\n    case 11: $saint  = \"Saint Daniel\";\n    break;\n    case 12: $saint  = \"Sainte Jeanne F.-C.\";\n    break;\n    case 13: $saint  = \"Sainte Lucie\";\n    break;\n    case 14: $saint  = \"Sainte Odile\";\n    break;\n    case 15: $saint  = \"Sainte Ninon\";\n    break;\n    case 16: $saint  = \"Sainte Alice\";\n    break;\n    case 17: $saint  = \"Saint Gaël\";\n    break;\n    case 18: $saint  = \"Saint Gatien\";\n    break;\n    case 19: $saint  = \"Saint Urbain\";\n    break;\n    case 20: $saint  = \"Saint Abraham\";\n    break;\n    case 21: $saint  = \"Saint P. Cenisius\";\n    break;\n    case 22: $saint  = \"Sainte Françoise-Xavière\";\n    break;\n    case 23: $saint  = \"Saint Armand\";\n    break;\n    case 24: $saint  = \"Saint Adèle\";\n    break;\n    case 25: $saint  = \"Noël\";\n    break;\n    case 26: $saint  = \"Saint Etienne\";\n    break;\n    case 27: $saint  = \"Saint Jean\";\n    break;\n    case 28: $saint  = \"Saint Innocents\";\n    break;\n    case 29: $saint  = \"Saint David\";\n    break;\n    case 30: $saint  = \"Saint Roger\";\n    break;\n    case 31: $saint  = \"Saint Sylvestre\";\n    break;\n        }\n      break;\n  }\n  return $saint;\n}\n\n$saintDuJour = saint(date('d'),date('m'));\n\n$date = date(\"Y-m-d\");\n$jourDemain = date(\"d\", strtotime($date.'+ 1 days'));\n$moisDemain = date(\"m\", strtotime($date.'+ 1 days'));\n$saintDemain  = saint($jourDemain,$moisDemain);\n$scenario->setLog('| tag(saintJour) : '.$saintDuJour);\n$scenario->setLog('| tag(saintDemain) : '.$saintDemain);\n$tags['#saintJour#'] = $saintDuJour;\n$tags['#saintDemain#'] = $saintDemain;\n$tags['#json#']['Saints'] = Array (\n    \"saintJour\" => $saintDuJour,\n    \"saintDemain\" => $saintDemain\n  );\n$scenario->setTags($tags);\n$scenario->setLog('└────────────────────────────');",
                                                "options": [],
                                                "order": "0"
                                            }
                                        ]
                                    }
                                ]
                            }
                        },
                        {
                            "type": "element",
                            "subtype": null,
                            "expression": "1964",
                            "options": [],
                            "order": "2",
                            "element": {
                                "name": null,
                                "type": "code",
                                "options": [],
                                "order": "0",
                                "subElements": [
                                    {
                                        "name": null,
                                        "type": "code",
                                        "subtype": "action",
                                        "options": {
                                            "collapse": "1",
                                            "enable": "1"
                                        },
                                        "order": "0",
                                        "expressions": [
                                            {
                                                "type": "code",
                                                "subtype": null,
                                                "expression": "\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ SOLEIL \/ JOUR \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n$scenario->setLog('┌─────────────────── SOLEIL \/ JOUR');\n$tags = $scenario->getTags(); \/\/récupère la liste des tags\n$lat = config::byKey('info::latitude');\n$long = config::byKey('info::longitude');\n\/\/ Date du jour\n$dateDuJour = date(\"d\/m\/Y\");\n$dateDuJourScenario = date(\"Y-m-d\");\n\n\/\/ Numero de jour de l'année\n$daynumber = date('z')+1;\n\n\/\/ Lever & Coucher du soleil\n$sun_info = date_sun_info(time(), $lat, $long);\n$sunrise = date(\"H:i\", $sun_info[\"sunrise\"]);\n$zenith = date(\"H:i\", $sun_info[\"transit\"]);\n$sunset = date(\"H:i\", $sun_info[\"sunset\"]);\n\n$aubeCivil = date(\"Hi\", $sun_info[\"civil_twilight_begin\"]);\n$crepusculeCivil = date(\"Hi\", $sun_info[\"civil_twilight_end\"]);\n$aubeNautique = date(\"Hi\", $sun_info[\"nautical_twilight_begin\"]);\n$crepusculeNautique = date(\"Hi\", $sun_info[\"nautical_twilight_end\"]);\n$aubeAstronomique = date(\"Hi\", $sun_info[\"astronomical_twilight_begin\"]);\n$crepusculeAstronomique = date(\"Hi\", $sun_info[\"astronomical_twilight_end\"]);\n\n$sunriseWidget = date(\"H\\hi\", $sun_info[\"sunrise\"]);\n$zenithWidget = date(\"H\\hi\", $sun_info[\"transit\"]);\n$sunsetWidget = date(\"H\\hi\", $sun_info[\"sunset\"]);\n$sunriseScenario = date(\"Hi\", $sun_info[\"sunrise\"]);\n$zenithScenario = date(\"Hi\", $sun_info[\"transit\"]);\n$sunsetScenario = date(\"Hi\", $sun_info[\"sunset\"]);\n\n$sunrise_minutes = (date(\"H\", $sun_info[\"sunrise\"])*60)+date(\"i\", $sun_info[\"sunrise\"]);\n$sunset_minutes = (date(\"H\", $sun_info[\"sunset\"])*60)+date(\"i\", $sun_info[\"sunset\"]);\n$now_minutes = (date(\"H\")*60)+date(\"i\");\n\n$diff1 =  $sunset_minutes - $sunrise_minutes; \/\/mn entre leve et coucher\n$diff2 = $now_minutes - $sunrise_minutes;\nif ($diff2 < 0 || $diff2 > $sunset_minutes) $diff2 = 0;\n$poucent_sun = ($diff2*100)\/$diff1;\n$positionHorizontalSun = ($poucent_sun\/100*225)+5; \/\/ longueur div = 225, padding = 5\n$positionHorizontalSun = ($positionHorizontalSun > 230) ? 230 : $positionHorizontalSun;\n\n\/\/ Durée du jour\n$sunriseSecond = strtotime(date(\"Y-m-d H:i:s\", $sun_info[\"sunrise\"]));\n$sunsetSecond = strtotime(date(\"Y-m-d H:i:s\", $sun_info[\"sunset\"]));\n\/\/$scenario->setLog('| ------------------ $test : '.$test);\n\n$interval = $sunsetSecond - $sunriseSecond;\n$seconds = $interval % 60;\n$minutes = floor(($interval % 3600) \/ 60);\n$hours = floor($interval \/ 3600);\n\n$hours = ($hours < 10) ? '0'.$hours : $hours;\n$minutes = ($minutes < 10) ? '0'.$minutes : $minutes;\n$seconds = ($seconds < 10) ? '0'.$seconds : $seconds;\n\n$dureeJour = $hours.\":\".$minutes.\":\".$seconds;\n\n\/\/if ($minutes < 10) $dureeJour = $hours.\":0\".$minutes.\":\".$seconds;\n\/\/else $dureeJour = $hours.\":\".$minutes.\":\".$seconds;\n\n\/\/ Ecart depuis hier\n$sun_info_hier = date_sun_info(strtotime('-1 day'), $lat, $long);\n$sunriseSecond_hier = strtotime(date(\"Y-m-d H:i:s\", $sun_info_hier[\"sunrise\"]));\n$sunsetSecond_hier = strtotime(date(\"Y-m-d H:i:s\", $sun_info_hier[\"sunset\"]));\n$interval_hier = $sunsetSecond_hier - $sunriseSecond_hier; \n$ecartJour = $interval - $interval_hier; \/\/ pour tag\n\n$ecartWidget = $ecartJour;\n$ecartWidgetSeconds = $ecartWidget % 60;\n$ecartWidgetMinutes = floor((abs($ecartWidget) % 3600) \/ 60);\nif ($ecartWidget > 0) $ecartWidget = \"+ \".$ecartWidgetMinutes.\"min \".$ecartWidgetSeconds.\"s\"; \/\/ Ecart\nelse $ecartWidget = \"- \".abs($ecartWidgetMinutes).\"min \".abs($ecartWidgetSeconds).\"s\";\n\n\n\n\/\/ Mode Jour\/nuit\nif(date(\"H:i\") >= $sunrise && date(\"H:i\") < $sunset){\n  $modeJour = \"Jour\"; \/\/ Jour ou Nuit\n  $modeJourBinaire = 1; \/\/ Jour Binaire \n}\nelse {\n  $modeJour = \"Nuit\";\n  $modeJourBinaire = 0; \/\/ Nuit Binaire \n}\n\/\/$modeJour = \"Jour\";\n\/\/$modeJour = \"Nuit\";\n\/\/$modeJourBinaire = 0;\n\/\/ Week-end\nif(date(\"l\") == 'Saturday' || date(\"l\") == 'Sunday') $weekend = 1; \/\/ Week-end\nelse $weekend = 0;\n\/\/$weekend = 1;\n\/\/ Jours fériés\n$date = date(\"Y-m-d\");\n\/\/$date = date(\"Y-12-25\");\n$ferie = 0;\n$libelle_ferie =\"\";\n$dateProchainFerie=\"\";\n$libelleProchainFerie=\"\";\n$diffFerie = \"\";\n$dimanche_paques = date(\"Y-m-d\", easter_date(date(\"Y\")));\/\/\n$holidays[\"Jour de l'an\"] = date(\"Y\").\"-01-01\";\n$holidays[\"Lundi de Paques\"] = date(\"Y-m-d\", strtotime(\"$dimanche_paques +1 day\"));\n$holidays[\"Ascension\"] = date(\"Y-m-d\", strtotime(\"$dimanche_paques +39 day\"));\n$holidays[\"Lundi Pentecote\"] = date(\"Y-m-d\", strtotime(\"$dimanche_paques +50 day\"));\n$holidays[\"Fête du travail\"] = date(\"Y\").\"-05-01\";\n$holidays[\"Victoire des alliés 1945\"] = date(\"Y\").\"-05-08\";\n$holidays[\"Assomption\"] = date(\"Y\").\"-08-15\";\n$holidays[\"Fête nationale\"] = date(\"Y\").\"-07-14\";\n$holidays[\"Armistice 1918\"] = date(\"Y\").\"-11-11\";\n$holidays[\"Toussaint\"] = date(\"Y\").\"-11-01\";\n$holidays[\"Noël\"] = date(\"Y\").\"-12-25\";\n$count = count($holidays);\nasort($holidays);\n$i=1;\n\nforeach($holidays as $key => $holiday_timestamp) {\n  if ($holiday_timestamp == $date) {\n    $ferie = 1; $libelle_ferie = $key;\n  }\n  if ($i == $count) { \/\/ si dernier ferié\n    if ($date < $holiday_timestamp)\n    {\n      $dateProchainFerie = $holiday_timestamp;\n      $libelleProchainFerie = $key;\n      break;\n    }\n    else\n    {\n      $d= date(\"Y\")+1;\n      $dateProchainFerie = $d.'-01-01';\n      $libelleProchainFerie = \"Jour de l'an\";\n      break;\n    }   \n  }\n  else\n  {\n    if ($date < $holiday_timestamp)\n    {\n      $dateProchainFerie = $holiday_timestamp;\n      $libelleProchainFerie = $key;\n      break; \n    }   \n  }\n  $i++;\n}\n$date1 = new DateTime($dateProchainFerie);\n$date2 = new DateTime($date);\n$diffFerie = $date1->diff($date2)->format(\"%a\");\n$dateProchainFerieScenario = date(\"Y-m-d\",strtotime(str_replace('\/','-',$dateProchainFerie)));\n$dateProchainFerie = date(\"d\/m\/Y\",strtotime(str_replace('\/','-',$dateProchainFerie)));\n\n\/\/ Saisons\n$date = date(\"Y-m-d\"); \n\/\/$date = \"2021-01-10\";\n$date_year = date(\"Y\", strtotime($date));  \nif (strtotime($date)<strtotime($date_year.'-03-21') || strtotime($date)>=strtotime($date_year.'-12-21')) $saison = \"Hiver\";\nelseif (strtotime($date)>=strtotime($date_year.'-09-23')) $saison = \"Automne\";\nelseif (strtotime($date)>=strtotime($date_year.'-06-21')) $saison = \"Eté\";\nelseif (strtotime($date)>=strtotime($date_year.'-03-21')) $saison = \"Printemps\";\n\/\/$saison = \"Printemps\";\n\/\/$saison = \"Hiver\";\n\/\/$saison = \"Automne\";\n\/\/$saison = \"Eté\";\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\nfunction getSunPosition($UnixTimestamp, $lat, $long)\n{\n  \/\/ fonction récuperé sur https:\/\/github.com\/KiboOst\/php-sunPos\/blob\/master\/phpSunPos.php et modifier pour ce scénario\n  $year = date(\"Y\",$UnixTimestamp);\n  $month = date(\"n\",$UnixTimestamp);\n  $day = date(\"j\",$UnixTimestamp);\n  $hour = gmdate(\"H\",$UnixTimestamp);\n  $min = gmdate(\"i\",$UnixTimestamp);\n        \/\/ From: http:\/\/stackoverflow.com\/questions\/8708048\/position-of-the-sun-given-time-of-day-latitude-and-longitude?rq=1\n\t\t\/\/ online check: https:\/\/www.esrl.noaa.gov\/gmd\/grad\/solcalc\/\n\n\t\t\/\/ Get Julian date for date at noon\n\t\t$jd = gregoriantojd($month,$day,$year);\n\n\t\t\/\/correct for half-day offset\n\t\t$dayfrac = $hour \/ 24 - .5;\n\n\t\t\/\/now set the fraction of a day\n\t\t$frac = $dayfrac + $min \/ 60 \/ 24;\n\t\t$jd = $jd + $frac;\n\n\t\t\/\/ The input to the Atronomer's almanach is the difference between\n\t\t\/\/ the Julian date and JD 2451545.0 (noon, 1 January 2000)\n\t\t$time = ($jd - 2451545);\n\n\t\t\/\/ Ecliptic coordinates\n\n\t\t\/\/ Mean longitude\n\t\t$mnlong = (280.460 + 0.9856474 * $time);\n\t\t$mnlong = fmod($mnlong,360);\n\t\tif ($mnlong < 0) $mnlong = ($mnlong + 360);\n\n\t\t\/\/ Mean anomaly\n\t\t$mnanom = (357.528 + 0.9856003 * $time);\n\t\t$mnanom = fmod($mnanom,360);\n\t\tif ($mnanom < 0) $mnanom = ($mnanom + 360);\n\t\t$mnanom = deg2rad($mnanom);\n\n\t\t\/\/ Ecliptic longitude and obliquity of ecliptic\n\t\t$eclong = ($mnlong + 1.915 * sin($mnanom) + 0.020 * sin(2 * $mnanom));\n\t\t$eclong = fmod($eclong,360);\n\t\tif ($eclong < 0) $eclong = ($eclong + 360);\n\t\t$oblqec = (23.439 - 0.0000004 * $time);\n\t\t$eclong = deg2rad($eclong);\n\t\t$oblqec = deg2rad($oblqec);\n\n\t\t\/\/ Celestial coordinates\n\t\t\/\/ Right ascension and declination\n\t\t$num = (cos($oblqec) * sin($eclong));\n\t\t$den = (cos($eclong));\n\t\t$ra = (atan($num \/ $den));\n\t\tif ($den < 0) $ra = ($ra + pi());\n\t\tif ($den >= 0 && $num <0) $ra = ($ra + 2*pi());\n\t\t$dec = (asin(sin($oblqec) * sin($eclong)));\n\n\t\t\/\/ Local coordinates\n\t\t\/\/ Greenwich mean sidereal time\n\t\t\/\/$h = $hour + $min \/ 60 + $sec \/ 3600;\n\t\t$h = $hour + $min \/ 60;\n\t\t$gmst = (6.697375 + .0657098242 * $time + $h);\n\t\t$gmst = fmod($gmst,24);\n\t\tif ($gmst < 0) $gmst = ($gmst + 24);\n\n\t\t\/\/ Local mean sidereal time\n\t\t$lmst = ($gmst + $long \/ 15);\n\t\t$lmst = fmod($lmst,24);\n\t\tif ($lmst < 0) $lmst = ($lmst + 24);\n\t\t$lmst = deg2rad($lmst * 15);\n\n\t\t\/\/ Hour angle\n\t\t$ha = ($lmst - $ra);\n\t\tif ($ha < pi()) $ha = ($ha + 2*pi());\n\t\tif ($ha > pi()) $ha = ($ha - 2*pi());\n\n\t\t\/\/ Latitude to radians\n\t\t$lat = deg2rad($lat);\n\n\t\t\/\/ Azimuth and elevation\n\t\t$el = (asin(sin($dec) * sin($lat) + cos($dec) * cos($lat) * cos($ha)));\n\t\t$az = (asin(-cos($dec) * sin($ha) \/ cos($el)));\n\n\t\t\/\/ For logic and names, see Spencer, J.W. 1989. Solar Energy. 42(4):353\n\t\tif ((sin($dec) - sin($el) * sin($lat)) >00) {\n\t\tif(sin($az) < 0) $az = ($az + 2*pi());\n\t\t} else {\n\t\t$az = (pi() - $az);\n\t\t}\n\n\t\t$el = rad2deg($el);\n\t\t$az = rad2deg($az);\n\t\t$lat = rad2deg($lat);\n\n\t\treturn array(number_format($el, 2), number_format($az, 2));\n\t}\n$Sun = getSunPosition(time(),$lat,$long);\n$Sun2 = getSunPosition(strtotime( date(\"Y\").\"-\".date(\"m\").\"-\".date(\"d\").\"T\".$zenith.\":00\" ),$lat,$long);\n\n$positionVerticalSun = ($Sun[0]*55\/$Sun2[0])-15;\n$positionVerticalSun = ($positionVerticalSun < -15) ? -15 : $positionVerticalSun;\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ LOG \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n$scenario->setLog('| tag(dateDuJour) : '.$dateDuJourScenario);\n$scenario->setLog('| tag(dayNumber) : '.$daynumber);\n$scenario->setLog('| tag(leverSoleilScenario) : '.$sunriseScenario);\n$scenario->setLog('| tag(zenithSoleilScenario) : '.$zenithScenario);\n$scenario->setLog('| tag(coucherSoleilScenario) : '.$sunsetScenario);\n$scenario->setLog('| tag(aubeCivil) : '.$aubeCivil);\n$scenario->setLog('| tag(crepusculeCivil) : '.$crepusculeCivil);\n$scenario->setLog('| tag(aubeNautique) : '.$aubeNautique);\n$scenario->setLog('| tag(crepusculeNautique) : '.$crepusculeNautique);\n$scenario->setLog('| tag(aubeAstronomique) : '.$aubeAstronomique);\n$scenario->setLog('| tag(crepusculeAstronomique) : '.$crepusculeAstronomique);\n$scenario->setLog('| tag(elevation) : '.$Sun[0]);\n$scenario->setLog('| tag(elevationZenith) : '.$Sun2[0]);\n$scenario->setLog('| tag(dureeJour) : '.$dureeJour);\n$scenario->setLog('| tag(dureeJourSeconde) : ' .$interval);\n$scenario->setLog('| tag(dureeJourEcart) : '.$ecartJour);\n$scenario->setLog('| tag(modeJourBinaire) : '.$modeJourBinaire);\n$scenario->setLog('| tag(modeJour) : '.$modeJour);\n$scenario->setLog('| tag(weekend) : '.$weekend);\n$scenario->setLog('| tag(ferie) : '.$ferie);\n$scenario->setLog('| tag(libelleFerie) : '.$libelle_ferie);\n$scenario->setLog('| tag(dateProchainFerie) : '.$dateProchainFerieScenario);\n$scenario->setLog('| tag(libelleProchainFerie) : '.$libelleProchainFerie);\n$scenario->setLog('| tag(nbProchainFerie) : '.$diffFerie);\n$scenario->setLog('| tag(saison) : '.$saison);\nif ($tags['#debug#'] == 1) {\n  $scenario->setLog('| -------------- DEBUG --------------');\n  $scenario->setLog('| Lever : '.$sunrise);\n  $scenario->setLog('| zenith : '.$zenith);\n  $scenario->setLog('| Coucher : '.$sunset);\n  $scenario->setLog('| Position H widget : '.$positionHorizontalSun.'px');\n  $scenario->setLog('| Position V widget : '.$positionVerticalSun.'px');\n  $scenario->setLog('| Mode : '.$modeJour);\n}\n$scenario->setLog('└───────────────────────────');\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ TAG \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n$tags['#dateDuJour#'] = '\"'.$dateDuJourScenario.'\"';\n$tags['#dayNumber#'] = $daynumber;\n$tags['#leverSoleilScenario#'] = $sunriseScenario;\n$tags['#zenithSoleilScenario#'] = $zenithScenario;\n$tags['#coucherSoleilScenario#'] = $sunsetScenario;\n\n$tags['#aubeCivil#'] = $aubeCivil;\n$tags['#crepusculeCivil#'] = $crepusculeCivil;\n$tags['#aubeNautique#'] = $aubeNautique;\n$tags['#crepusculeNautique#'] = $crepusculeNautique;\n$tags['#aubeAstronomique#'] = $aubeAstronomique;\n$tags['#crepusculeAstronomique#'] = $crepusculeAstronomique;\n\n\n$tags['#elevation#'] = $Sun[0];\n$tags['#elevationZenith#'] = $Sun2[0];\n$tags['#dureeJour#'] = $dureeJour;\n$tags['#dureeJourEcart#'] = $ecartJour;\n$tags['#dureeJourSeconde#'] = $interval;\n$tags['#modeJourBinaire#'] = $modeJourBinaire;\n$tags['#modeJour#'] = $modeJour;\n$tags['#weekend#'] = $weekend;\n$tags['#ferie#'] = $ferie;\n$tags['#libelleFerie#'] = $libelle_ferie;\n$tags['#dateProchainFerie#'] = '\"'.$dateProchainFerieScenario.'\"';\n$tags['#libelleProchainFerie#'] = $libelleProchainFerie;\n$tags['#nbProchainFerie#'] = $diffFerie;\n$tags['#saison#'] = $saison;\n\n$tags['#json#']['Soleil'] = Array (\n    \"elevation\" => $Sun[0],\n    \"elevationZenith\" => $Sun2[0],\n    \"leverSoleil\" => $sunriseWidget,\n    \"zenithSoleil\" => $zenithWidget,\n    \"coucherSoleil\" => $sunsetWidget,\n    \"positionHorizontalSun\" => $positionHorizontalSun,\n    \"positionVerticalSun\" => $positionVerticalSun\n  );\n$tags['#json#']['Jour'] = Array (\n    \"dateJour\" => $dateDuJour,\n    \"dureeJour\" => $dureeJour,\n    \"dureeJourEcart\" => $ecartWidget,\n    \"modeJour\" => $modeJour,\n    \"weekend\" => $weekend,\n    \"ferie\" => $ferie,\n    \"libelleFerie\" => $libelle_ferie,\n    \"dateProchainFerie\" => $dateProchainFerie,    \n    \"libelleProchainFerie\" => $libelleProchainFerie,\n    \"nbProchainFerie\" => $diffFerie,\n    \"saison\" => $saison\n       \n  );\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ JSON \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n$scenario->setTags($tags);",
                                                "options": [],
                                                "order": "0"
                                            }
                                        ]
                                    }
                                ]
                            }
                        },
                        {
                            "type": "element",
                            "subtype": null,
                            "expression": "1965",
                            "options": [],
                            "order": "3",
                            "element": {
                                "name": null,
                                "type": "code",
                                "options": [],
                                "order": "0",
                                "subElements": [
                                    {
                                        "name": null,
                                        "type": "code",
                                        "subtype": "action",
                                        "options": {
                                            "collapse": "1",
                                            "enable": "1"
                                        },
                                        "order": "0",
                                        "expressions": [
                                            {
                                                "type": "code",
                                                "subtype": null,
                                                "expression": "\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ WIDGET \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n$tags = $scenario->getTags(); \/\/récupère la liste des tags\n\/\/$tags['#json#']['test'] = Array (\"test\" => \"test\"); \/\/ pour test\n$json = json_encode($tags['#json#']);\n$tags['#json#'] = $json;\n$scenario->setTags($tags);",
                                                "options": [],
                                                "order": "0"
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "",
            "type": "action",
            "options": [],
            "order": "0",
            "subElements": [
                {
                    "name": "",
                    "type": "action",
                    "subtype": "action",
                    "options": {
                        "collapse": "0",
                        "enable": "1"
                    },
                    "order": "0",
                    "expressions": [
                        {
                            "type": "element",
                            "subtype": null,
                            "expression": "1967",
                            "options": [],
                            "order": "0",
                            "element": {
                                "name": null,
                                "type": "comment",
                                "options": [],
                                "order": "0",
                                "subElements": [
                                    {
                                        "name": null,
                                        "type": "comment",
                                        "subtype": "comment",
                                        "options": {
                                            "collapse": "1"
                                        },
                                        "order": "0",
                                        "expressions": [
                                            {
                                                "type": "comment",
                                                "subtype": null,
                                                "expression": "TAG POUR WIDGET",
                                                "options": [],
                                                "order": "0"
                                            }
                                        ]
                                    }
                                ]
                            }
                        },
                        {
                            "type": "element",
                            "subtype": null,
                            "expression": "1968",
                            "options": [],
                            "order": "1",
                            "element": {
                                "name": null,
                                "type": "action",
                                "options": [],
                                "order": "0",
                                "subElements": [
                                    {
                                        "name": null,
                                        "type": "action",
                                        "subtype": "action",
                                        "options": {
                                            "collapse": "1",
                                            "enable": "1"
                                        },
                                        "order": "0",
                                        "expressions": [
                                            {
                                                "type": "action",
                                                "subtype": null,
                                                "expression": "event",
                                                "options": {
                                                    "enable": "1",
                                                    "background": "0",
                                                    "cmd": "#[InfoJour][Type_de_jour][json]#",
                                                    "value": "\"tag(json)\""
                                                },
                                                "order": "0"
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    ]
                }
            ]
        }
    ]
}