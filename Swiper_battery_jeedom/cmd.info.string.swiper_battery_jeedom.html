<div class="cmd #history# tooltips cmd-widget" data-type="info" data-subtype="string" data-cmd_id="#id#" data-cmd_uid="#uid#" data-version="#version#" data-eqLogic_id="#eqLogic_id#" style="width: 100%;">
  <!-- ################ Distribution de l'energie ################ 
  Widget name : cmd.info.string.swiper.battery_jeedom
  Author : Phpvarious
    Création : 09/04/2022
  Last Uptade :
-->
  <template>
    <div>------------------- WIDGET ----------------------------</div>
    <div>effect : 0 à 5 (Défaut : 0 -> coverflow, 1 -> cube, 2 -> flip, 3 -> fade, 4 -> cards, 5 -> creative)</div>
    <div>(1) disponible uniquement si "effect" = 0</div>
    <div>slidesPerView (1) : nombres de tuiles à afficher en même temps (défaut --> auto)</div>
    <div>centeredSlides (1) : 1ère tuile centrée au widget (défaut : 1 -> centrée)</div>
    <div>rotate (1) : effet de rotaion de la tuile (défaut : 10)</div>
    <div>depth (1) : effet de profondeur du widget (défaut : 200)</div>
    <div>paginationType : 0 a 5, type de pagination (défaut : 1 -> Bullets, 0 -> masquée, 2 -> dynamicBullets, 3 -> progressbar, 4 -> fraction)</div>
    <div>swiperButton : 0 = Masquer les flêches de navigation (défaut : 1 = afficher)</div>
    <div>(2) disponible uniquement pour "effect" = 0, 1 et 2</div>
    <div>freeMode (2) : effet d'inertie lors d'un swippe (défaut : 0 = désactiver, 1 = activer)</div>
    <div>grabCursor : cursor grab sur les tuiles (défaut : 1 = activer, 0 = désactiver)</div>
    <div>backgroundColor : Couleur de fond de la tuile (défaut : white)</div>
    <div>loop : boucle sur le widget (défaut : 0 = désactiver, 1 = activer)</div>
    <div>------------------- CSS ----------------------------</div>
  </template>
  <script src="data/customTemplates/dashboard/cmd.info.string.swiper_battery_jeedom/swiper-bundle.min.js"></script>
  <link rel="stylesheet" href="data/customTemplates/dashboard/cmd.info.string.swiper_battery_jeedom/swiper-bundle.min.css">
  <style>
    :root {
      
      --background-tuile#id# : rgba(var(--eq-bg-color), var(--opacity));
      --background-color#id# : white;
      --title-color#id# : white;
      --color-critical#id# : var(--al-danger-color);
      --color-warning#id# : var(--al-warning-color);
      --color-good#id# : var(--al-success-color);
      --color-battery-critical#id# : var(--al-danger-color);
      --color-battery-warning#id# : var(--al-warning-color);
      --color-battery-good#id# : var(--al-success-color);
      
      --width#id# : 210px;
      --bullet-color#id# : rgba(0, 0, 0, 0.2);
      --bullet-active-color#id# : #007aff;
      --bullet-width#id# : 10px;
      
      
      --backgroundtitle#id# : white;
      --backgroundTemp#id# : white;
      --valueColor#id# : black;
    }
    .mySwiper#id# {
      padding-top: 50px !important;
      padding-bottom: 50px!important;
      background-color: var(--background-color#id#);
    }
    .mySwiper#id#.swiper-cube, .mySwiper#id#.swiper-flip, .mySwiper#id#.swiper-cards, .mySwiper#id#.swiper-creative, .mySwiper#id#.swiper-fade{
      width: var(--width#id#);
    }
    .mySwiper#id# .swiper-button-prev{
      left: -5px;
    }
    .mySwiper#id# .swiper-button-next{
      right: -5px;
    }
    .mySwiper#id# .swiper-button-next:after, .mySwiper#id# .swiper-button-prev:after{
      font-size: 20px;
    }
    .mySwiper#id#.swiper-coverflow{
      width: 100%;
    }
    .mySwiper#id#.swiper-coverflow .swiper-slide{
      width: var(--width#id#);
    }
    
    .mySwiper#id# .swiper-slide-shadow-left, .mySwiper#id# .swiper-slide-shadow-right {
      background-image: unset;
    }
    .mySwiper#id# .swiper-pagination-progressbar{
      top: unset;
      bottom: 12px;
    }
    .mySwiper#id# .swiper-pagination-fraction{
      bottom: 12px;
      color: var(--bullet-active-color#id#);
    }
    .mySwiper#id# .swiper-pagination-bullet {
      width: var(--bullet-width#id#);
      height: var(--bullet-width#id#);
      text-align: center;
      line-height: var(--bullet-width#id#);
      opacity: 1;
      background: var(--bullet-color#id#);
    }
    .mySwiper#id# .swiper-pagination-progressbar {
      background: var(--bullet-color#id#);
      height: 5px;
    }
    
    .mySwiper#id# .swiper-pagination-progressbar .swiper-pagination-progressbar-fill {
      background: var(--bullet-active-color#id#);
    }
    .mySwiper#id# .swiper-pagination-bullet-active {
      background: var(--bullet-active-color#id#);
      opacity: 1;
    }
    .mySwiper#id# .swiper-scrollbar{
      left: 0%;
      width: 100%;
      overflow: hidden;
    }
    .mySwiper#id# .swiper-scrollbar-drag{
      left: -48%;
    }
    .mySwiper#id# .hidden#id#{
      display: none;
    }
    .mySwiper#id# .swiper-scrollbar {
    bottom: 12px;
    }
    .mySwiper#id# .swiper-pagination-clickable .swiper-pagination-bullet {
    cursor: pointer !important;
}
    
    
    
    .mySwiper#id# .eqLogic-widget{
      height: 150px !important;
      width: 210px !important;
      background-color: var(--background-tuile#id#) !important;
      margin: 0px 0px 0px 0px !important;
    }
    .mySwiper#id# .eqLogic-widget .widget-name{
      color: var(--title-color#id#);
      line-height: 1.42;
    }
    
    .mySwiper#id# .eqLogic-widget.critical .widget-name {
      background-color: var(--color-critical#id#) !important;
    }
    .mySwiper#id# .eqLogic-widget.good .widget-name {
      background-color: var(--color-good#id#) !important; 
    }
    .mySwiper#id# .eqLogic-widget.warning .widget-name {
      background-color: var(--color-warning#id#) !important; 
    }
    
    .mySwiper#id# .eqLogic-widget .widget-name .name {
      display: block;
      max-height: 24px !important;
      overflow: hidden !important;
      font-size: 16px !important;
    }
    .mySwiper#id# .eqLogic-widget .widget-name .object {
      opacity: .5;
      font-size: 14px;
    }
    
    .mySwiper#id# .eqLogic-widget.critical .jeedom-batterie i {
      color: var(--color-battery-critical#id#);
    }
    .mySwiper#id# .eqLogic-widget.good .jeedom-batterie i {
      color: var(--color-battery-good#id#);
    }
    .mySwiper#id# .eqLogic-widget .jeedom-batterie i {
      vertical-align: middle;
      font-size: 75px !important;
      }
    .mySwiper#id# .eqLogic-widget .jeedom-batterie {
      color: var(--link-color);
      margin-top: -12px;
      margin-bottom: -20px;
      }
   .mySwiper#id# .eqLogic-widget .jeedom-batterie span {
      position: relative;
      display: inline-block;
      font-family: "Roboto";
      color: var(--link-color);
      font-size: 18px;
      font-weight: bold;
      top: 3px;
    }
    .mySwiper#id# .pluginName {
      padding-left: 5px;
      font-size: 14px;
      font-weight: bold;
    }
    
    .mySwiper#id# .eqLogic-widget .batteryTime {
      clear: left;
      padding-left: 5px;
      font-size: 12px;
    }
    .mySwiper#id# .eqLogic-widget .batteryTime i {
      font-size: 16px !important;
    }
  </style>
  <div style="width: 100%;border-radius: 5px !important;display: none;" id="div_alert#id#" class="jqAlert alert-danger">
    <span href="#" class="btn_closeAlert pull-right cursor" style="position : relative; left : 30px;color : grey">×</span>
    <span class="displayError#id#">Veuillez sélectionner un équipement !</span>
  </div>
  <!-- Swiper -->
  <div class="mySwiper#id# swiper">
    <div class="swiper-wrapper insert#id#"></div>
    <div class="swiper-pagination swiper-pagination#id# hidden#id#" id="swiper-pagination#id#"></div>
    <div class="swiper-button-prev swiper-button-prev#id#"></div>
    <div class="swiper-button-next swiper-button-next#id#"></div>
    <div class="swiper-scrollbar swiper-scrollbar#id# hidden#id#"></div>
  </div>

  <script>
    $(document).ready(function () {
      
      var effect#id# = "coverflow"
      var slidesPerView#id# = "auto"
      var centeredSlides#id# = true
      var rotate#id# = 10
      var depth#id# = 200
      var paginationTypeOpt#id# = 'bullets'
      var dynamicBullets#id# = false
      var swiperButton#id# = true
      var freeMode#id# = false
      var grabCursor#id# = true
      var loop#id# = false
      var slideShadows#id# = true
      
      
      ///////////////////////// WIDGET ///////////////////////////
      if ('#effect#' != '#'+'effect#') {
      //if ($.issetWidgetOptParam('#effect#', 'effect')) {
        if ("#effect#" == 1) effect#id# = "cube"
        else if ("#effect#" == 2) effect#id# = "flip"
        else if ("#effect#" == 3) effect#id# = "fade"
        else if ("#effect#" == 4) effect#id# = "cards"
        else if ("#effect#" == 5) effect#id# = "creative"
        else effect#id# = "coverflow"
      }
      
      if (effect#id# != "coverflow") dynamicBullets#id#=true
      
      if ('#slidesPerView#' != '#'+'slidesPerView#') {
      //if ($.issetWidgetOptParam('#slidesPerView#', 'slidesPerView')) {
        slidesPerView#id# = '#slidesPerView#'
      }
      
      if ('#centeredSlides#' != '#'+'centeredSlides#') {
      //if ($.issetWidgetOptParam('#centeredSlides#', 'centeredSlides')) {
        if ("#centeredSlides#" == 0) centeredSlides#id# = false
      }
      
      if ('#rotate#' != '#'+'rotate#') {
      //if ($.issetWidgetOptParam('#rotate#', 'rotate')) {
        rotate#id# = "#rotate#"
      }
      
      if ('#depth#' != '#'+'depth#') {
      //if ($.issetWidgetOptParam('#depth#', 'depth')) {
        depth#id# = "#depth#"
      }
      
      if ('#paginationType#' != '#'+'paginationType#') {
      //if ($.issetWidgetOptParam('#paginationType#', 'paginationType')) {
        if ("#paginationType#" == 2) dynamicBullets#id# = true
        else if ("#paginationType#" == 3) paginationTypeOpt#id# = "progressbar"
        else if ("#paginationType#" == 4) paginationTypeOpt#id# = "fraction"
        if ("#paginationType#" != 0) $('.swiper-pagination#id#').toggleClass("hidden#id#", false)
      }
      
      if ('#swiperButton#' != '#'+'swiperButton#') {
      //if ($.issetWidgetOptParam('#swiperButton#', 'swiperButton')) {
        if ("#swiperButton#" == 0) {
          $('.swiper-button-prev#id#').toggleClass("hidden#id#", true)
          $('.swiper-button-next#id#').toggleClass("hidden#id#", true)
        }
      }
      
      if ('#freeMode#' != '#'+'freeMode#') {
      //if ($.issetWidgetOptParam('#freeMode#', 'freeMode')) {
        if ("#freeMode#" == 1 && effect#id# != "fade" && effect#id# != "cards"  && effect#id# != "creative") freeMode#id# = true
      }
      
      if ('#grabCursor#' != '#'+'grabCursor#') {
      //if ($.issetWidgetOptParam('#grabCursor#', 'grabCursor')) {
        if ("#grabCursor#" == 0) grabCursor#id# = false
      }
      
      if ('#loop#' != '#'+'loop#') {
      //if ($.issetWidgetOptParam('#loop#', 'loop')) {
        if ("#loop#" == 1) loop#id# = true
      }
      
      if ('#slideShadows#' != '#'+'slideShadows#') {
      //if ($.issetWidgetOptParam('#slideShadows#', 'slideShadows')) {
        if ("#slideShadows#" == 0) slideShadows#id# = false
      }
      
      ///////////////////////// CSS ////////////////////////////////////
      
      if ('#textEqlogicColor#' != '#'+'textEqlogicColor#') {
      //if ($.issetWidgetOptParam('#textEqlogicColor#', 'textEqlogicColor')) {
        document.documentElement.style.setProperty('--title-color#id#', '#textEqlogicColor#')
      }
      
      if ('#colorCritical#' != '#'+'colorCritical#') {
      //if ($.issetWidgetOptParam('#colorCritical#', 'colorCritical')) {
        document.documentElement.style.setProperty('--color-critical#id#', '#colorCritical#')
      }
      
      if ('#backgroundTuile#' != '#'+'backgroundTuile#') {
      //if ($.issetWidgetOptParam('#backgroundTuile#', 'backgroundTuile')) {
        document.documentElement.style.setProperty('--background-tuile#id#', '#backgroundTuile#')
      }
      
      if ('#backgroundColor#' != '#'+'backgroundColor#') {
      //if ($.issetWidgetOptParam('#backgroundColor#', 'backgroundColor')) {
        document.documentElement.style.setProperty('--background-color#id#', '#backgroundColor#')
      }
      
      if ('#paginationColor#' != '#'+'paginationColor#') {
      //if ($.issetWidgetOptParam('#paginationColor#', 'paginationColor')) {
        document.documentElement.style.setProperty('--bullet-color#id#', '#paginationColor#')
      }
      
      if ('#paginationColorActive#' != '#'+'paginationColorActive#') {
      //if ($.issetWidgetOptParam('#paginationColorActive#', 'paginationColorActive')) {
        document.documentElement.style.setProperty('--bullet-active-color#id#', '#paginationColorActive#')
      }
      
      
      var swiper = new Swiper(".mySwiper#id#", {
        effect: effect#id#,
        freeMode: freeMode#id#,
        grabCursor: grabCursor#id#,
        centeredSlides: centeredSlides#id#,
        slidesPerView: slidesPerView#id#,
        spaceBetween: 30,
        loop: loop#id#,
        //direction: "vertical",
        coverflowEffect: {
          rotate: rotate#id#,
          stretch: 0,
          depth: depth#id#,
          modifier: 1,
          slideShadows: slideShadows#id# },
        creativeEffect: {
          prev: {
            shadow: true,
            translate: ["-125%", 0, -800],
            rotate: [0, 0, -90],
          },
          next: {
            shadow: true,
            translate: ["125%", 0, -800],
            rotate: [0, 0, 90],
          },
        },
        pagination: {
          el: ".swiper-pagination#id#",
          type: paginationTypeOpt#id#,
          clickable: true,
          dynamicBullets: dynamicBullets#id#,
        },
        navigation: {
          nextEl: '.swiper-button-next#id#',
          prevEl: '.swiper-button-prev#id#',
        },
        scrollbar: {
          el: ".swiper-scrollbar#id#",
          hide: false
        },
        mousewheel: true,
        keyboard: true,
      });    
    })
    
    jeedom.cmd.update['#id#'] = function(_options){
      var debug = is_numeric('#debug#') ? parseFloat('#debug#'):0
      if (debug == 1) console.log('┌─────────────────── Widget Swiper Battery Jeedom')
      if ('#backgroundTitle#' != '#'+'backgroundTitle#') {
      //if ($.issetWidgetOptParam('#backgroundTitle#', 'backgroundTitle')) {
        document.documentElement.style.setProperty('--backgroundtitle#id#', '#backgroundTitle#')
      }
      
      jeedom.eqLogic.htmlBattery({
        version : 'mobile',
        async: false,
        noCache: true,
        error: function(error) {
          if (debug == 1) console.log('|| ERREUR !!!')
        },
        success: function (htmlBattery) {
          for (j in htmlBattery) {
            $(".insert#id#").append('<div class="swiper-slide">'+htmlBattery[j].html+'</div>')
            if (debug == 1) console.log('|┌───── '+htmlBattery[j].id)
            if (debug == 1) console.log('|| plugin : '+htmlBattery[j].type)
          }
          
        }
      })
    }
    jeedom.cmd.update['#id#']({display_value:'#state#',valueDate:'#valueDate#',collectDate:'#collectDate#',alertLevel:'#alertLevel#'});
  </script>
</div>